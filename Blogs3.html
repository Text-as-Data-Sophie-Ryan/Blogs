<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Text As Data Blog Posts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Blogs3_files/libs/clipboard/clipboard.min.js"></script>
<script src="Blogs3_files/libs/quarto-html/quarto.js"></script>
<script src="Blogs3_files/libs/quarto-html/popper.min.js"></script>
<script src="Blogs3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Blogs3_files/libs/quarto-html/anchor.min.js"></script>
<link href="Blogs3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Blogs3_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Blogs3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Blogs3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Blogs3_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Text As Data Blog Posts</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="blog-post-1" class="level1">
<h1>Blog Post 1</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>My name is Sophie Ryan, I am a Data Analytics and Computational Social Sciences graduate student with a background in Communications and Media Studies and Psychology. My studies have inspired a passion for learning about how people interact with each other and the world around them. I love using data as a way to deepen my understanding of the social sciences from a new perspective.</p>
<p>In my undergraduate degree, I took a course called Countercultural Films. I was able to learn about the counterculture movement of the 1960’s through the perspective of media and music. I believe music is one of the most powerful forms of communication we have, and it is truly reflective of social attitudes. During this time, rock music was extremely politically charged and played a huge role in giving young people a voice. After Kennedy’s assassination, this political and cultural phenomenon spread anti-war, anti-establishment, and pro-peace messages through music and film. The pinnacle of this movement was the Woodstock Festival in 1969, where influential artists like Jimi Hendrix, Bob Dylan, and Joan Baez gave legendary performances that protested the government and promoted social justice. Hundreds of thousands of people came together at the festival to show solidarity. Moments like this display how important music can be in politics and culture. It acted not just as entertainment, but a catalyst for change and representation of public opinion.</p>
</section>
<section id="research-question" class="level2">
<h2 class="anchored" data-anchor-id="research-question">Research Question</h2>
<p>My goal is to dive deeper into this political and social movement through the lense of text-as-data. How did the sentiment and themes of counterculture rock music differ from the mainstream political messages from the United States government, particularly in relation to the Vietnam War, social justice, and civil rights?</p>
</section>
<section id="corpora" class="level2">
<h2 class="anchored" data-anchor-id="corpora">Corpora</h2>
<p>The corpora I plan to use for the music portion of this project will come from the Billboard Charts and Lyric Genius APIs. This will allow me to see the most popular and influential music, and access the lyrics to those songs to conduct further analysis. MSU’s underground press and alternative newspaper collection could be used as a supplemental source representative of the counterculture movement’s messages.</p>
<p>For my analysis of mainstream political messages from the time, I will use ProQuest’s archives of historical newspapers. Additionally, I will investigate the Miller Center UVA speech archive, which provides transcripts of presidential speeches.</p>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping Up</h2>
<p>I’m looking forward to using text analysis to dive deeper into how music was representative of the political and social unrest of the 1960’s. Many of the lyrics from these artists openly criticized the government, the war, and racial injustice. The Lyric Genius corpora will be a great source for identifying themes, sentiments, and word frequencies. Mainstream newspaper articles will show how politics were being presented. Presidential speeches are also a good representation of the messages that the government was trying to convey at the time. I’m very intrigued to see the contrast of sentiments and themes between the two opposing groups. It could provide insight as to how the counterculture movement was so influential and worked to change public opinion on a variety of issues.</p>
</section>
</section>
<section id="blog-post-2" class="level1">
<h1>Blog Post 2</h1>
</section>
<section id="counterculture-music-vs.-media" class="level1">
<h1>Counterculture: Music vs.&nbsp;Media</h1>
<section id="research-question-1" class="level2">
<h2 class="anchored" data-anchor-id="research-question-1">Research Question</h2>
<p>In my project, I will be investigating how themes and sentiments of counterculture rock music in the 1960’s compared to that of mainstream media, particularly in relation to the Vietnam War, civil rights, and social justice movements.</p>
</section>
<section id="my-corpus" class="level2">
<h2 class="anchored" data-anchor-id="my-corpus">My Corpus</h2>
<p>In order to collect this data, I decided to utilize the set list from the Woodstock Art and Music Festival of 1969. This festival was a pivotal moment in music history and popular culture. It was representative of the wide social unrest taking place at the time. Almost 500,000 people attended in efforts to promote peace and unity. This was the pinnacle of the counterculture movement, a political and cultural phenomenon that was anti-war, anti-establishment, and pro-peace. Young people across the country organized protests to fight for civil rights, and music often played a huge role in this. Many rock artists at this time used their platforms to support these causes, and the music was very politically charged. Jimi Hendrix’ famous rendition of the Star Spangled Banner is one example of how the festival was leveraged to express unhappiness with the political climate. Therefore, the music played at this 3 day long festival is the perfect culmination of songs for my corpus representing the messages of counterculture’s rock music.</p>
<section id="lyrics-corpus" class="level3">
<h3 class="anchored" data-anchor-id="lyrics-corpus">Lyrics Corpus</h3>
<p>To acquire these songs and lyrics, I used webscraping from Wikipedia and a lyric website called LyricsFreak. First, I scraped the Wikipedia page that gave a list of songs and artists.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loading packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: quanteda</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 4.2.0
Unicode version: 14.0
ICU version: 71.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: disabled</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'quanteda.sentiment'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:quanteda':

    data_dictionary_LSD2015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Defining the Wikipedia URL for the setlist at Woodstock</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>url1 <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/List_of_performances_and_events_at_Woodstock_Festival"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Defining the CSS selectors. </span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>css_selector <span class="ot">&lt;-</span> <span class="st">".mw-body p + ol"</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>css_selector_artists <span class="ot">&lt;-</span> <span class="st">".mw-body .mw-heading3"</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>special_css <span class="ot">&lt;-</span> <span class="st">"ol"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I defined 3 selectors, one for the titles which gave the artist name, another for the body which gave the song list, and a third for a special case, Crosby Stills and Nash. This artist’s songs were in a nested list, which I had to treat differently.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Song text</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>song_list <span class="ot">&lt;-</span> url1 <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> css_selector) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#CSN song text</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>special_case <span class="ot">&lt;-</span> url1 <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> special_css) <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Artist list</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>artist_list <span class="ot">&lt;-</span> url1 <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> css_selector_artists) <span class="sc">%&gt;%</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Removing a speaker, not an artist</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>artist_list <span class="ot">&lt;-</span> artist_list[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Defining the nested list I need</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>special2 <span class="ot">&lt;-</span> (special_case[<span class="dv">29</span><span class="sc">:</span><span class="dv">32</span>])</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>flattened_songs <span class="ot">&lt;-</span> <span class="fu">paste</span>(special2, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding the nested list songs to the original song list in the corresponding artist spot</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>song_list <span class="ot">&lt;-</span> <span class="fu">append</span>(song_list, <span class="fu">list</span>(flattened_songs), <span class="at">after =</span> <span class="dv">28</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove [edit] from the artist names</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>artist_list <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[edit</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>, artist_list)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>artist_list <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(artist_list)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>split_songs <span class="ot">&lt;-</span> <span class="fu">str_split</span>(song_list, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up whitespace and remove empty rows</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>clean_songs <span class="ot">&lt;-</span> <span class="fu">map</span>(split_songs, <span class="sc">~</span> <span class="fu">str_squish</span>(.x) <span class="sc">%&gt;%</span> .[. <span class="sc">!=</span> <span class="st">""</span>])</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Only keep artists with corresponding song lists</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which artists actually have songs listed</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>valid_artists <span class="ot">&lt;-</span> artist_list[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(clean_songs)]</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine only valid pairs</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>woodstock_data <span class="ot">&lt;-</span> <span class="fu">map2</span>(</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>  valid_artists,</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>  clean_songs,</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">data.frame</span>(<span class="at">artist =</span> .x, <span class="at">song =</span> .y, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first 10 rows</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(woodstock_data, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          artist                                                    song
1  Richie Havens                                       "From the Prison"
2  Richie Havens                                          "Get Together"
3  Richie Havens                             "From the Prison" (reprise)
4  Richie Havens                                   "I'm a Stranger Here"
5  Richie Havens                                      "High Flying Bird"
6  Richie Havens                               "I Can't Make It Anymore"
7  Richie Havens    "With a Little Help from My Friends" (Beatles cover)
8  Richie Havens                                       "Handsome Johnny"
9  Richie Havens "Strawberry Fields Forever / Hey Jude" (Beatles covers)
10 Richie Havens     "Freedom (Motherless Child)" (improvised lyrics[5])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replacing Crosby Stills Nash &amp; Young artist name, because the lyric site names them as only "Crosby Stills &amp; Nash" </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>woodstock_data <span class="ot">&lt;-</span> woodstock_data <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">artist =</span> <span class="fu">ifelse</span>(artist <span class="sc">==</span> <span class="st">"Crosby, Stills, Nash &amp; Young"</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Crosby, Stills &amp; Nash"</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                         artist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now I have a data frame consisting of every artist and each song they played. Next, I had to add lyrics to the data frame. I did this by creating a function that scraped the lyrics from pages on LyricsFreak for every song.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loading packages</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(curl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using libcurl 8.11.1 with OpenSSL/3.3.2 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'curl'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:httr':

    handle_reset</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating a function to scrape the LyricsFreak pages for each song. </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>get_lyrics_lyricsfreak <span class="ot">&lt;-</span> <span class="cf">function</span>(song_name, artist_name) {</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct search URL</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  base_search_url <span class="ot">&lt;-</span> <span class="st">"https://www.lyricsfreak.com/search.php"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="fu">paste</span>(artist_name, song_name)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Send search request</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  search_page <span class="ot">&lt;-</span> <span class="fu">GET</span>(base_search_url, <span class="at">query =</span> <span class="fu">list</span>(<span class="at">q =</span> query))</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Parse the search result page</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  search_html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="fu">content</span>(search_page, <span class="st">"text"</span>))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the first song link that matches the artist</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  song_link <span class="ot">&lt;-</span> search_html <span class="sc">%&gt;%</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">"a.song"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">"href"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    .[<span class="dv">1</span>]  <span class="co"># Get the first match</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If no link found, return NA</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(song_link) <span class="sc">||</span> <span class="fu">length</span>(song_link) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Complete the URL for the song's page</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  song_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.lyricsfreak.com"</span>, song_link)</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Scrape the lyrics from the song's page</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  song_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(song_url)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  lyrics <span class="ot">&lt;-</span> song_page <span class="sc">%&gt;%</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".js-share-text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text2</span>()</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up the lyrics text</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>  lyrics <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(lyrics)</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(lyrics)</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize a column to store lyrics</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>woodstock_data<span class="sc">$</span>lyrics <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each row and get lyrics</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(woodstock_data)) {</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>  song_name <span class="ot">&lt;-</span> woodstock_data<span class="sc">$</span>song[i]</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>  artist_name <span class="ot">&lt;-</span> woodstock_data<span class="sc">$</span>artist[i]</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the lyrics and store it in the new column</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>  woodstock_data<span class="sc">$</span>lyrics[i] <span class="ot">&lt;-</span> <span class="fu">get_lyrics_lyricsfreak</span>(song_name, artist_name)</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Pause to be polite to the website</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="dv">2</span>)</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(woodstock_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         artist                        song
1 Richie Havens           "From the Prison"
2 Richie Havens              "Get Together"
3 Richie Havens "From the Prison" (reprise)
4 Richie Havens       "I'm a Stranger Here"
5 Richie Havens          "High Flying Bird"
6 Richie Havens   "I Can't Make It Anymore"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           lyrics
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
5 "There's a high flyin' bird, flying way up in the sky, And I wonder if she looks down, as she goes on by? Well, she's flying so freely in the sky. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, Can't cry Oh Lord, gonna die blues. Now the sun it comes up and lights up the day, And when he gets tired, Lord, he goes on down his way, To the east and to the west, He meets God every day. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, can't cry Oh Lord, gonna die blues. Now I had a woman Lord, she lived down by the mine, She ain't never seen the sun, Oh Lord, never stopped trying. Then one day my woman up and died, Lord, she up and died now. Oh Lord, she up and died now. She wanted to fly, And the only way to fly is die, die, die. There's a high flyin' bird, flying way up in the sky, And I wonder if she looks down as she goes on by? Well, she's flying so freely in the sky. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, can't cry, Oh, Lord, gonna die blues. " Share lyrics ×
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;</code></pre>
</div>
</div>
<p>Running this function added an empty column to my existing data frame, and added the lyrics for each song. I am running into some problems at this step, as 161 of the songs do not have lyrics. Going forward, I may have to scrape from other websites to fill in gaps. For now, I have enough lyrics to create a lyrics corpus and perform some pre-processing steps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Row 174 provided incorrect lyrics to The Who's song; "I'm Free", so I'm removing this row. </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>woodstock_data <span class="ot">&lt;-</span> woodstock_data[<span class="sc">-</span><span class="dv">174</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First I removed NA and missing values </span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span> woodstock_data <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lyrics) <span class="sc">&amp;</span> lyrics <span class="sc">!=</span> <span class="st">""</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>doc_id <span class="ot">&lt;-</span> <span class="fu">paste</span>(cleaned_data<span class="sc">$</span>artist, cleaned_data<span class="sc">$</span>song, <span class="at">sep =</span> <span class="st">" - "</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating the corpus</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>lyrics_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(cleaned_data<span class="sc">$</span>lyrics, </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">docnames =</span> cleaned_data<span class="sc">$</span>doc_id)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lyrics_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 156 documents, showing 100 documents:

                                                               Text Types
                                 Richie Havens - "High Flying Bird"    92
                                  Richie Havens - "Handsome Johnny"    92
                                    Sweetwater - "Motherless Child"    36
                                            Sweetwater - "Look Out"    74
                                            Sweetwater - "Day Song"    55
                                        Sweetwater - "What's Wrong"   137
                                          Sweetwater - "Two Worlds"   108
                               Tim Hardin - "If I Were a Carpenter"    66
                                   Tim Hardin - "Reason to Believe"    52
                                  Tim Hardin - "Speak Like a Child"   133
                              Tim Hardin - "Simple Song of Freedom"   133
                                        Melanie - "Close to It All"   100
                                            Melanie - "Momma Momma"    65
                                       Melanie - "Beautiful People"   136
                                        Melanie - "Animal Crackers"   125
                                       Melanie - "Tuning My Guitar"   147
                           Arlo Guthrie - "Coming into Los Angeles"    94
                                  Arlo Guthrie - "Wheel of Fortune"    70
                            Arlo Guthrie - "Every Hand in the Land"    99
                                     Arlo Guthrie - "Amazing Grace"    64
                                         Joan Baez - "Oh Happy Day"    38
                            Joan Baez - "The Last Thing on My Mind"    88
                                  Joan Baez - "I Shall Be Released"    84
                                             Joan Baez - "Joe Hill"    77
                                    Joan Baez - "Sweet Sir Galahad"   162
                                         Joan Baez - "Hickory Wind"    72
                                    Joan Baez - "One Day at a Time"    72
                Joan Baez - "Take Me Back to the Sweet Sunny South"    78
                                    Joan Baez - "We Shall Overcome"   120
                              Country Joe McDonald - "Ring of Fire"    46
                                                Santana - "Waiting"    51
                                              Santana - "Evil Ways"    84
                                    Santana - "You Just Don't Care"    66
                                                  Santana - "Savor"    30
                                                  Santana - "Jingo"     9
                                             Santana - "Persuasion"    69
                            John Sebastian - "Darling Be Home Soon"   104
                              John Sebastian - "Younger Generation"   166
                          The Incredible String Band - "Invocation"   170
                          The Incredible String Band - "The Letter"   157
                         The Incredible String Band - "This Moment"    62
                        The Incredible String Band - "Come with Me"   102
       The Incredible String Band - "When You Find Out Who You Are"   193
                               Canned Heat - "Going Up the Country"    91
                                  Canned Heat - "On the Road Again"    94
                                      Mountain - "Blood of the Sun"    84
                        Mountain - "Theme for an Imaginary Western"    83
                                      Mountain - "Southbound Train"   169
                                      Grateful Dead - "St. Stephen"   211
                                       Grateful Dead - "Mama Tried"   113
                                        Grateful Dead - "Dark Star"    60
                                        Grateful Dead - "High Time"    90
                          Grateful Dead - "Turn On Your Love Light"    60
                 Creedence Clearwater Revival - "Born on the Bayou"    76
                       Creedence Clearwater Revival - "Green River"   103
 Creedence Clearwater Revival - "Ninety-Nine and a Half (Won't Do)"    82
                           Creedence Clearwater Revival - "Bootleg"    68
                         Creedence Clearwater Revival - "Commotion"    73
                   Creedence Clearwater Revival - "Bad Moon Rising"    73
                        Creedence Clearwater Revival - "Proud Mary"    87
              Creedence Clearwater Revival - "I Put a Spell on You"    43
      Creedence Clearwater Revival - "Night Time Is the Right Time"    48
                 Creedence Clearwater Revival - "Keep on Chooglin'"    79
                           Creedence Clearwater Revival - "Susie Q"    29
                      Sly &amp; the Family Stone - "Sing a Simple Song"    99
              Sly &amp; the Family Stone - "You Can Make It If You Try"    61
                      Sly &amp; the Family Stone - "Dance to the Music"    80
               Sly &amp; the Family Stone - "I Want to Take You Higher"    73
                                  Sly &amp; the Family Stone - "Stand!"    94
                                        The Who - "Heaven and Hell"    58
                                        The Who - "I Can't Explain"    84
                                             The Who - "It's a Boy"    16
                                                   The Who - "1921"    89
                                        The Who - "Amazing Journey"   121
                                                 The Who - "Sparks"    81
                                              The Who - "Christmas"   372
                                         The Who - "The Acid Queen"   105
                             The Who - "Do You Think It's Alright?"    33
                                           The Who - "Fiddle About"    44
                                       The Who - "There's a Doctor"    35
                                      The Who - "Go to the Mirror!"   120
                                       The Who - "Smash the Mirror"    53
                                   The Who - "Tommy's Holiday Camp"    37
                                The Who - "We're Not Gonna Take It"   157
                                        The Who - "See Me, Feel Me"    34
                                       The Who - "Summertime Blues"    96
                                       The Who - "Shakin' All Over"    51
                 Jefferson Airplane - "The Other Side of This Life"    76
                            Jefferson Airplane - "Somebody to Love"    71
                 Jefferson Airplane - "3/5 of a Mile in 10 Seconds"    98
            Jefferson Airplane - "Won't You Try/Saturday Afternoon"   106
                             Jefferson Airplane - "Eskimo Blue Day"   138
                     Jefferson Airplane - "Plastic Fantastic Lover"   107
                                Jefferson Airplane - "Wooden Ships"   188
                             Jefferson Airplane - "Uncle Sam Blues"    67
                                  Jefferson Airplane - "Volunteers"    61
        Jefferson Airplane - "The Ballad of You and Me and Pooneil"   129
                                Jefferson Airplane - "White Rabbit"    99
                Jefferson Airplane - "The House at Pooneil Corners"   167
                                  Country Joe and the Fish - "Love"    61
 Tokens Sentences
    276        13
    372         7
    123         1
    117         1
    105         1
    209        13
    171         2
    154         7
    174         1
    295         1
    216         9
    305         7
    176         9
    271         2
    217        15
    356         3
    146         3
    116         1
    172         1
    135         1
    291         1
    214         4
    181        12
    191         8
    278        14
    115         1
    193         7
    115         1
    306        12
    204         8
     75         1
    162        15
    132         9
     37         2
     44         1
    120         1
    294         1
    286        25
    357         1
    247         1
    130         2
    169         1
    342         2
    166         1
    254        14
    150         2
    140         1
    333         4
    377        20
    228         7
     95         9
    187         9
    228         8
    197        11
    155        10
    203        21
    113        10
    158        12
    180        18
    238         1
    145         1
    195        12
    135        11
    187         1
    368         1
    231         2
    150         7
    214         8
    168         5
    123         7
    230         3
     36         6
    267        22
    188        14
    148         1
    694         5
    252        28
     51         5
    136        15
     75         4
    259         1
    103         8
     67         6
    494        41
    133         1
    212         1
    151         1
    231         3
    215        21
    190         2
    247         1
    218         1
    142         1
    299         1
    173         1
    101         1
    319         6
    141         1
    296        22
    198         6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ndoc</span>(lyrics_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 156</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(lyrics_corpus))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33563</code></pre>
</div>
</div>
<p>There are 156 documents and 33563 tokens in my corpus.</p>
<p>Next, I removed numbers, punctuation, and stopwords. I added some custom stopwords, as song lyrics tend to have some repetitive terms that are not very representative of the messages of the songs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tokens_clean <span class="ot">&lt;-</span> <span class="fu">tokens</span>(lyrics_corpus, </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">what =</span> <span class="st">"word"</span>, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tokens_tolower</span>()</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>custom_stopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="st">"baby"</span>, <span class="st">"na"</span>, <span class="st">"lyrics"</span>, <span class="st">"oh"</span>, <span class="st">"got"</span>, <span class="st">"x"</span>, <span class="st">"yeah"</span>, <span class="st">"can"</span>, <span class="st">"go"</span>, <span class="st">"like"</span>, <span class="st">"now"</span>, <span class="st">"chorus"</span>, <span class="st">"get"</span>, <span class="st">"one"</span>, <span class="st">"x"</span>, <span class="st">"bah"</span>, <span class="st">"ahh"</span>, <span class="st">"shaka-laka-laka"</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>tokens_clean <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(tokens_clean,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                              <span class="at">pattern =</span> custom_stopwords,</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">selection =</span> <span class="st">"remove"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, I created a document feature matrix and found some top features.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>lyrics_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(tokens_clean)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(lyrics_dfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> love  know share     ×  come   see  time  just never gonna 
  185   163   158   156   133   126   112   104    98    90 </code></pre>
</div>
</div>
<p>Next, I created a few preliminary visualizations to get an idea of what I’ll be working with. I made a wordcloud and a network. Moving forward, I’ll have to figure out ways I can remove more custom “stopwords” that appear in almost all songs but do not add value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># draw the wordcloud</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(lyrics_dfm, <span class="at">min_count =</span> <span class="dv">20</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(lyrics_dfm, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">min_docfreq =</span> .<span class="dv">2</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_dfm, <span class="dv">30</span>))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finally I found some sentiment scores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>sentiment_scores <span class="ot">&lt;-</span> <span class="fu">dfm_lookup</span>(lyrics_dfm, <span class="at">dictionary =</span> data_dictionary_LSD2015)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to df</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>sentiment_df <span class="ot">&lt;-</span> <span class="fu">convert</span>(sentiment_scores, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>sentiment_df<span class="sc">$</span>Text <span class="ot">&lt;-</span> <span class="fu">as.character</span>(lyrics_corpus)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentiment_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                              doc_id negative positive neg_positive
1 Richie Havens - "High Flying Bird"       13        4            0
2  Richie Havens - "Handsome Johnny"       23       11            0
3    Sweetwater - "Motherless Child"        1        0            0
4            Sweetwater - "Look Out"        1        3            0
5            Sweetwater - "Day Song"        6        7            0
6        Sweetwater - "What's Wrong"       24        4            0
  neg_negative
1            0
2            0
3            0
4            0
5            0
6            0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               "There's a high flyin' bird, flying way up in the sky, And I wonder if she looks down, as she goes on by? Well, she's flying so freely in the sky. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, Can't cry Oh Lord, gonna die blues. Now the sun it comes up and lights up the day, And when he gets tired, Lord, he goes on down his way, To the east and to the west, He meets God every day. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, can't cry Oh Lord, gonna die blues. Now I had a woman Lord, she lived down by the mine, She ain't never seen the sun, Oh Lord, never stopped trying. Then one day my woman up and died, Lord, she up and died now. Oh Lord, she up and died now. She wanted to fly, And the only way to fly is die, die, die. There's a high flyin' bird, flying way up in the sky, And I wonder if she looks down as she goes on by? Well, she's flying so freely in the sky. Lord, look at me here, I'm rooted like a tree here, Got those sit-down, can't cry, Oh, Lord, gonna die blues. " Share lyrics ×
2 Hey, look yonder, tell me what's that you see Marching to the fields of Concord? Looks like Handsome Johnny with a musket in his hand Marching to the Concord war, hey, marching to the Concord war Hey, look yonder, tell me what's that you see Marching to the fields of Gettysburg? Looks like Handsome Johnny with a flintlock in his hand Marching to the Gettysburg war, hey, marching to the Gettysburg war Hey, it's a long hard road, it's a long hard road It's a long hard road, hey, before we'll be free Hey, look yonder, tell me what you see Marching to the fields of Dunkirk? Looks like Handsome Johnny with a carbine in his hand Marching to the Dunkirk war, hey, marching to the Dunkirk war Hey, look yonder, tell me what you see Marching to the fields of Korea? Looks like Handsome Johnny with an M1 in his hand Marching to the Korean war, hey, marching to the Korean war Hey, it's a long hard road, it's a long hard road It's a long hard road, hey, before we'll be free Hey, before we'll be free Hey, look yonder, tell me what you see Marching to the fields of Vietnam? Looks like Handsome Johnny with an M15 Marching to the Vietnam war, hey, marching to the Vietnam war Hey, look yonder, tell me what you see Marching to the fields of Birmingham? Looks like Handsome Johnny with his hand rolled in a fist Marching to the Birmingham war, hey, marching to the Birmingham war Hey, what's the use of singing this song Some of you are not even listening Tell me what it is we've got to do, wait for our fields to start glistening Hey, wait for the bullets to start whistling Hey, here comes a hydrogen bomb and here comes a guided missile Here comes a hydrogen bomb, I can almost hear its whistle I can almost hear its whistle Share lyrics ×
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Sometimes I feel like a motherless child Sometimes I feel like a motherless child Sometimes I feel like a motherless child And I'm alone, and I'm alone away from my home Sometimes I feel like if I'm almost gone Sometimes I feel like if I'm almost gone Sometimes I feel like if I'm almost gone And I'm aloneand I'm la la la la la la alone and I'm alone Away from my home, from my home Sometimes I feel like there's nobody there Sometimes I feel like there'sno no no nobody there Sometimes I feel like there'snobody there And I'm aloneand I'm la la la la la la alone and I'm real lonely From my home x 8 Share lyrics ×
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Look out, somebody's comin' He's got the key to your door He ain't who you thought of He's not what you're lookin' for Let's go to the city Put down your papa's rake and hoe I'll bring you love and money Ooh Look out, somebody's comin' He's got you on the list He'll take the time to haunt you Tempt you with the things you missed I want you to remember my face Heaven's not real This is the place Hey, hey, hey Look out, somebody's comin' Still you don't believe he's there He says you been sold Honey, you say you don't care Share lyrics ×
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Captain sailed the ship today Old Love, she just sighed Met his mother on the way They stopped and cried Cat on the sill See the sad rain fall Do as you will I love you more than all Old Love sailed the ship today Captain he just sighed Met her father on the way They stopped and cried Cat on the sill See the sad rain fall Do as you will I love you more than all Sing the song of sailin' away Sing it from your heart Sing the song of sailin' away Even though we part Share lyrics ×
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             "WHAT'S WRONG" What's wrong in our schools? Politicians are blowing their cools Over they who refuse to follow the rules Though they should be separate dealings What's wrong at the zoo? The animals sense our fear showing through Our facade yet there's not a thing they can do It's hurting their poor helpless feelings What's wrong? Chorus: What is wrong? What is wrong? What 's wrong with our folks? Strong and solid as hundred year oaks So firm in their ways They think we are jokes They just don't know why What's wrong in their head? Won't they just try to see it once our way instead? If they did then there wouldn't be any more dead No reason to cry Chorus What's wrong in your heart? Do you feel that soon mankind and reason will part? As each day worsens you fear we will start On that anxiously dark endless journey What's wrong with this top? As it spins each year gives us a worsening crop Of hatred that one day could cause it to stop A lesson we all could be learning What's wrong? Chorus (repeats) Share lyrics ×</code></pre>
</div>
</div>
<p>There is still a lot of work that needs to be done on this corpus, but I believe I’m making good progress and this will be a good representation of the themes of counterculture music.</p>
</section>
<section id="media-corpus" class="level3">
<h3 class="anchored" data-anchor-id="media-corpus">Media Corpus</h3>
<p>For my corpus of mainstream media about counterculture, I would like to use historical newspapers from ProQuest. I was exploring many of these documents using search terms such as “Vietnam War”, “antiwar”, “protest”, “hippie”, “counterculture”, etc. There were hundreds of relevant documents. Unfortunately, most of these are in pdf form. This makes creating the corpus more difficult. Going forward, I will either have to perform OCR, or find another source to represent the sentiment of mainstream media during the 60’s.</p>
<p>Here’s an example of one newspaper article from April 24, 1971.</p>
<p><img src="images/Screenshot%202025-02-26%20at%205.01.13%20PM.png" class="img-fluid"></p>
<p>Documents like this could be really useful in my analysis, and I look forward to continuing work on creating a corpus.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Using text as data to investigate counterculture will provide a really interesting snapshot of sentiments and themes of the time period. I’m fascinated by this movement, and I believe it was a very important time in America for politics, culture, and rock music. Breaking down these corpora into their core elements can provide a new perspective on counterculture that I haven’t previously considered, and I’m excited to see where this project can take me.</p>
</section>
</section>
<section id="blog-post-3" class="level1">
<h1>Blog Post 3</h1>
<section id="research-question-2" class="level2">
<h2 class="anchored" data-anchor-id="research-question-2">Research Question</h2>
<p>In my project, I will be investigating how themes and sentiments of 1960’s counterculture rock music contrasts to that of mainstream media, with a focus on key issues such as the Vietnam War, civil rights, and social justice movements.</p>
</section>
<section id="exploratory-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-analysis">Exploratory Analysis</h2>
<p>In order to uncover patterns in my data, I experimented with a variety of methods. Working with song lyrics has been challenging, but I’ve continued my work with sentiment analysis, and began to perform topic modeling. I’m also exploring key words in context (kwic) to get a better understanding. For my OCR work with ProQuest, I am still struggling with data wrangling. I’ve had to manually download PDFs, which is time consuming and I’m working on a better solution. Despite these challenges, I’m starting to see my data more clearly and uncover themes.</p>
<section id="lyric-analysis" class="level3">
<h3 class="anchored" data-anchor-id="lyric-analysis">Lyric Analysis</h3>
<p>First, I visualized overall sentiment scores of the song lyric corpus. These sentiments are pretty spread out, so I went into more depth looking at specific topics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>sentiment_df<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (sentiment_df<span class="sc">$</span>positive <span class="sc">-</span> sentiment_df<span class="sc">$</span>negative)<span class="sc">/</span>(sentiment_df<span class="sc">$</span>positive <span class="sc">+</span> sentiment_df<span class="sc">$</span>negative)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sentiment_df) <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(polarity)) <span class="sc">+</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="looking-at-some-key-words-in-context-war-peace-free." class="level4">
<h4 class="anchored" data-anchor-id="looking-at-some-key-words-in-context-war-peace-free.">Looking at some key words in context; “war”, “peace”, “free”.</h4>
<p>I wanted to see how the lyrics relate to these topics that were pertinent to the counterculture movement. I created a couple of wordclouds with these key words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>kwic_war <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"war"</span>))</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_war)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                        
 [Richie Havens - "Handsome Johnny", 16]
 [Richie Havens - "Handsome Johnny", 20]
 [Richie Havens - "Handsome Johnny", 36]
 [Richie Havens - "Handsome Johnny", 40]
 [Richie Havens - "Handsome Johnny", 68]
 [Richie Havens - "Handsome Johnny", 72]
                                                  
       johnny musket hand marching concord | war |
          concord war hey marching concord | war |
 johnny flintlock hand marching gettysburg | war |
    gettysburg war hey marching gettysburg | war |
      johnny carbine hand marching dunkirk | war |
          dunkirk war hey marching dunkirk | war |
                                
 hey marching concord war hey   
 hey look yonder tell see       
 hey marching gettysburg war hey
 hey long hard road long        
 hey marching dunkirk war hey   
 hey look yonder tell see       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now look at a broader window of terms</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>kwic_war <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"war"</span>),</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">window =</span> <span class="dv">10</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_war)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                        
 [Richie Havens - "Handsome Johnny", 16]
 [Richie Havens - "Handsome Johnny", 20]
 [Richie Havens - "Handsome Johnny", 36]
 [Richie Havens - "Handsome Johnny", 40]
 [Richie Havens - "Handsome Johnny", 68]
 [Richie Havens - "Handsome Johnny", 72]
                                                                                    
          marching fields concord looks handsome johnny musket hand marching concord
               handsome johnny musket hand marching concord war hey marching concord
 marching fields gettysburg looks handsome johnny flintlock hand marching gettysburg
      handsome johnny flintlock hand marching gettysburg war hey marching gettysburg
         marching fields dunkirk looks handsome johnny carbine hand marching dunkirk
              handsome johnny carbine hand marching dunkirk war hey marching dunkirk
                                                                           
 | war | hey marching concord war hey look yonder tell see marching        
 | war | hey look yonder tell see marching fields gettysburg looks handsome
 | war | hey marching gettysburg war hey long hard road long hard          
 | war | hey long hard road long hard road long hard road                  
 | war | hey marching dunkirk war hey look yonder tell see marching        
 | war | hey look yonder tell see marching fields korea looks handsome     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>kwic_peace <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"peace"</span>))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_peace)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                 
           [Joan Baez - "We Shall Overcome", 128]
           [Joan Baez - "We Shall Overcome", 131]
           [Joan Baez - "We Shall Overcome", 134]
 [The Incredible String Band - "Invocation", 121]
    [Blood, Sweat &amp; Tears - "And When I Die", 33]
    [Blood, Sweat &amp; Tears - "And When I Die", 40]
                                                                         
        day deep heart shall live | peace | shall live peace shall live  
      shall live peace shall live | peace | shall live peace day deep    
      shall live peace shall live | peace | day deep heart shall free    
 guard growth growing things make | peace | blueness blue sky wrath storm
    hits scared dying really care | peace | find dying well let time     
         dying well let time near | peace | find dying dying time just   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now look at a broader window of terms </span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>kwic_peace <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"peace"</span>),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">window =</span> <span class="dv">10</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_peace)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                 
           [Joan Baez - "We Shall Overcome", 128]
           [Joan Baez - "We Shall Overcome", 131]
           [Joan Baez - "We Shall Overcome", 134]
 [The Incredible String Band - "Invocation", 121]
    [Blood, Sweat &amp; Tears - "And When I Die", 33]
    [Blood, Sweat &amp; Tears - "And When I Die", 40]
                                                                         
             hand hand walk hand hand day deep heart shall live | peace |
           hand hand day deep heart shall live peace shall live | peace |
        deep heart shall live peace shall live peace shall live | peace |
  upon make fertile soft earth guard growth growing things make | peace |
 tears blood sweat tears greatest hits scared dying really care | peace |
          dying really care peace find dying well let time near | peace |
                                                                   
 shall live peace shall live peace day deep heart shall            
 shall live peace day deep heart shall free shall free             
 day deep heart shall free shall free shall free day               
 blueness blue sky wrath storm take cup deepness earthshakers sharp
 find dying well let time near peace find dying dying              
 find dying dying time just bundle coffin cause cold way           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>kwic_free <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"free"</span>))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_free)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                                            
  [Richie Havens - "Handsome Johnny", 52]          road long hard road hey |
 [Richie Havens - "Handsome Johnny", 104]          road long hard road hey |
 [Richie Havens - "Handsome Johnny", 106]           hard road hey free hey |
          [Sweetwater - "Two Worlds", 61]     wrong even though heart soul |
  [Tim Hardin - "Speak Like a Child", 20]  maybe speak child things saying |
  [Tim Hardin - "Speak Like a Child", 54] really speak child crazy sayings |
                                        
 free | hey look yonder tell see        
 free | hey free hey look yonder        
 free | hey look yonder tell see        
 free | come along good livin know      
 free | wild believe look eyes offer    
 free | wild make bargain promise change</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now look at a broader window of terms </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>kwic_free <span class="ot">&lt;-</span> <span class="fu">kwic</span>(tokens_clean,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"free"</span>),</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">window =</span> <span class="dv">10</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_free)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                         
  [Richie Havens - "Handsome Johnny", 52]
 [Richie Havens - "Handsome Johnny", 104]
 [Richie Havens - "Handsome Johnny", 106]
          [Sweetwater - "Two Worlds", 61]
  [Tim Hardin - "Speak Like a Child", 20]
  [Tim Hardin - "Speak Like a Child", 54]
                                                                             
                    long hard road long hard road long hard road hey | free |
                    long hard road long hard road long hard road hey | free |
                     road long hard road long hard road hey free hey | free |
         along good times little sinnin wrong even though heart soul | free |
   mean nothing believe really blame maybe speak child things saying | free |
 lecher probably true least lecture really speak child crazy sayings | free |
                                                                
 hey look yonder tell see marching fields dunkirk looks handsome
 hey free hey look yonder tell see marching fields vietnam      
 hey look yonder tell see marching fields vietnam looks handsome
 come along good livin know inever tired know never tired       
 wild believe look eyes offer life never lies least kind        
 wild make bargain promise change somehow way spent day thinking</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>freedom_corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(kwic_free)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `corpus.kwic()` was deprecated in quanteda 4.0.
ℹ Please use `tokens_select(window)` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>freedom_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(freedom_corp)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>free_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(freedom_tokens)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(free_dfm, <span class="at">min_count =</span> <span class="dv">3</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>peace_corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(kwic_peace)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>peace_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(peace_corp)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>peace_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(peace_tokens)</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(peace_dfm, <span class="at">min_count =</span> <span class="dv">3</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>war_corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(kwic_war)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>war_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(war_corp)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>war_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(war_tokens)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(war_dfm, <span class="at">min_count =</span> <span class="dv">3</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I chose to look more into the “free” dfm, as it has the most data. I looked at sentiment scores for the “free” key word, and found the polarity to be overwhelmingly positive. The distribution here is much less evenly spread than in the overall corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>sentiment_scores_free <span class="ot">&lt;-</span> <span class="fu">dfm_lookup</span>(free_dfm, <span class="at">dictionary =</span> data_dictionary_LSD2015)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to df</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>sentiment_df_free <span class="ot">&lt;-</span> <span class="fu">convert</span>(sentiment_scores_free, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>sentiment_df_free<span class="sc">$</span>Text <span class="ot">&lt;-</span> <span class="fu">as.character</span>(freedom_corp)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentiment_df_free)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                   doc_id negative positive neg_positive
1 Richie Havens - "Handsome Johnny".1.pre        3        0            0
2 Richie Havens - "Handsome Johnny".2.pre        3        0            0
3 Richie Havens - "Handsome Johnny".3.pre        2        1            0
4         Sweetwater - "Two Worlds".1.pre        1        1            0
5 Tim Hardin - "Speak Like a Child".1.pre        1        0            0
6 Tim Hardin - "Speak Like a Child".2.pre        1        1            0
  neg_negative
1            0
2            0
3            0
4            0
5            0
6            0
                                                                 Text
1                    long hard road long hard road long hard road hey
2                    long hard road long hard road long hard road hey
3                     road long hard road long hard road hey free hey
4         along good times little sinnin wrong even though heart soul
5   mean nothing believe really blame maybe speak child things saying
6 lecher probably true least lecture really speak child crazy sayings</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>sentiment_df_free<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (sentiment_df_free<span class="sc">$</span>positive <span class="sc">-</span> sentiment_df_free<span class="sc">$</span>negative)<span class="sc">/</span>(sentiment_df_free<span class="sc">$</span>positive <span class="sc">+</span> sentiment_df_free<span class="sc">$</span>negative)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sentiment_df_free) <span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(polarity)) <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 10 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Overall, looking at key words has been helpful, especially when song lyrics tend to be more vague and abstract. Providing a focal point allows for a more focused approach.</p>
</section>
<section id="topic-modeling" class="level4">
<h4 class="anchored" data-anchor-id="topic-modeling">Topic modeling</h4>
<p>I used topic modeling techniques to try to get a feel for topics in my corpus. This has proved challenging with song lyrics, and I needed to get creative with my stopwords.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installs text2vec package (might take a while)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repos =</span> <span class="fu">c</span>(<span class="at">CRAN =</span> <span class="st">"https://cloud.r-project.org"</span>))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">'text2vec'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/zr/fc7ynkqn1dqf6nfgqfvm72rr0000gn/T//RtmpipHjwB/downloaded_packages</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(text2vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>tokens2 <span class="ot">&lt;-</span> <span class="fu">tolower</span>(cleaned_data<span class="sc">$</span>lyrics)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>tokens2 <span class="ot">&lt;-</span> <span class="fu">word_tokenizer</span>(tokens2)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tokens2, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
  [1] "there's" "a"       "high"    "flyin"   "bird"    "flying"  "way"    
  [8] "up"      "in"      "the"     "sky"     "and"     "i"       "wonder" 
 [15] "if"      "she"     "looks"   "down"    "as"      "she"     "goes"   
 [22] "on"      "by"      "well"    "she's"   "flying"  "so"      "freely" 
 [29] "in"      "the"     "sky"     "lord"    "look"    "at"      "me"     
 [36] "here"    "i'm"     "rooted"  "like"    "a"       "tree"    "here"   
 [43] "got"     "those"   "sit"     "down"    "can't"   "cry"     "oh"     
 [50] "lord"    "gonna"   "die"     "blues"   "now"     "the"     "sun"    
 [57] "it"      "comes"   "up"      "and"     "lights"  "up"      "the"    
 [64] "day"     "and"     "when"    "he"      "gets"    "tired"   "lord"   
 [71] "he"      "goes"    "on"      "down"    "his"     "way"     "to"     
 [78] "the"     "east"    "and"     "to"      "the"     "west"    "he"     
 [85] "meets"   "god"     "every"   "day"     "lord"    "look"    "at"     
 [92] "me"      "here"    "i'm"     "rooted"  "like"    "a"       "tree"   
 [99] "here"    "got"     "those"   "sit"     "down"    "can't"   "cry"    
[106] "oh"      "lord"    "gonna"   "die"     "blues"   "now"     "i"      
[113] "had"     "a"       "woman"   "lord"    "she"     "lived"   "down"   
[120] "by"      "the"     "mine"    "she"     "ain't"   "never"   "seen"   
[127] "the"     "sun"     "oh"      "lord"    "never"   "stopped" "trying" 
[134] "then"    "one"     "day"     "my"      "woman"   "up"      "and"    
[141] "died"    "lord"    "she"     "up"      "and"     "died"    "now"    
[148] "oh"      "lord"    "she"     "up"      "and"     "died"    "now"    
[155] "she"     "wanted"  "to"      "fly"     "and"     "the"     "only"   
[162] "way"     "to"      "fly"     "is"      "die"     "die"     "die"    
[169] "there's" "a"       "high"    "flyin"   "bird"    "flying"  "way"    
[176] "up"      "in"      "the"     "sky"     "and"     "i"       "wonder" 
[183] "if"      "she"     "looks"   "down"    "as"      "she"     "goes"   
[190] "on"      "by"      "well"    "she's"   "flying"  "so"      "freely" 
[197] "in"      "the"     "sky"     "lord"    "look"    "at"      "me"     
[204] "here"    "i'm"     "rooted"  "like"    "a"       "tree"    "here"   
[211] "got"     "those"   "sit"     "down"    "can't"   "cry"     "oh"     
[218] "lord"    "gonna"   "die"     "blues"   "share"   "lyrics" 

[[2]]
  [1] "hey"        "look"       "yonder"     "tell"       "me"        
  [6] "what's"     "that"       "you"        "see"        "marching"  
 [11] "to"         "the"        "fields"     "of"         "concord"   
 [16] "looks"      "like"       "handsome"   "johnny"     "with"      
 [21] "a"          "musket"     "in"         "his"        "hand"      
 [26] "marching"   "to"         "the"        "concord"    "war"       
 [31] "hey"        "marching"   "to"         "the"        "concord"   
 [36] "war"        "hey"        "look"       "yonder"     "tell"      
 [41] "me"         "what's"     "that"       "you"        "see"       
 [46] "marching"   "to"         "the"        "fields"     "of"        
 [51] "gettysburg" "looks"      "like"       "handsome"   "johnny"    
 [56] "with"       "a"          "flintlock"  "in"         "his"       
 [61] "hand"       "marching"   "to"         "the"        "gettysburg"
 [66] "war"        "hey"        "marching"   "to"         "the"       
 [71] "gettysburg" "war"        "hey"        "it's"       "a"         
 [76] "long"       "hard"       "road"       "it's"       "a"         
 [81] "long"       "hard"       "road"       "it's"       "a"         
 [86] "long"       "hard"       "road"       "hey"        "before"    
 [91] "we'll"      "be"         "free"       "hey"        "look"      
 [96] "yonder"     "tell"       "me"         "what"       "you"       
[101] "see"        "marching"   "to"         "the"        "fields"    
[106] "of"         "dunkirk"    "looks"      "like"       "handsome"  
[111] "johnny"     "with"       "a"          "carbine"    "in"        
[116] "his"        "hand"       "marching"   "to"         "the"       
[121] "dunkirk"    "war"        "hey"        "marching"   "to"        
[126] "the"        "dunkirk"    "war"        "hey"        "look"      
[131] "yonder"     "tell"       "me"         "what"       "you"       
[136] "see"        "marching"   "to"         "the"        "fields"    
[141] "of"         "korea"      "looks"      "like"       "handsome"  
[146] "johnny"     "with"       "an"         "m1"         "in"        
[151] "his"        "hand"       "marching"   "to"         "the"       
[156] "korean"     "war"        "hey"        "marching"   "to"        
[161] "the"        "korean"     "war"        "hey"        "it's"      
[166] "a"          "long"       "hard"       "road"       "it's"      
[171] "a"          "long"       "hard"       "road"       "it's"      
[176] "a"          "long"       "hard"       "road"       "hey"       
[181] "before"     "we'll"      "be"         "free"       "hey"       
[186] "before"     "we'll"      "be"         "free"       "hey"       
[191] "look"       "yonder"     "tell"       "me"         "what"      
[196] "you"        "see"        "marching"   "to"         "the"       
[201] "fields"     "of"         "vietnam"    "looks"      "like"      
[206] "handsome"   "johnny"     "with"       "an"         "m15"       
[211] "marching"   "to"         "the"        "vietnam"    "war"       
[216] "hey"        "marching"   "to"         "the"        "vietnam"   
[221] "war"        "hey"        "look"       "yonder"     "tell"      
[226] "me"         "what"       "you"        "see"        "marching"  
[231] "to"         "the"        "fields"     "of"         "birmingham"
[236] "looks"      "like"       "handsome"   "johnny"     "with"      
[241] "his"        "hand"       "rolled"     "in"         "a"         
[246] "fist"       "marching"   "to"         "the"        "birmingham"
[251] "war"        "hey"        "marching"   "to"         "the"       
[256] "birmingham" "war"        "hey"        "what's"     "the"       
[261] "use"        "of"         "singing"    "this"       "song"      
[266] "some"       "of"         "you"        "are"        "not"       
[271] "even"       "listening"  "tell"       "me"         "what"      
[276] "it"         "is"         "we've"      "got"        "to"        
[281] "do"         "wait"       "for"        "our"        "fields"    
[286] "to"         "start"      "glistening" "hey"        "wait"      
[291] "for"        "the"        "bullets"    "to"         "start"     
[296] "whistling"  "hey"        "here"       "comes"      "a"         
[301] "hydrogen"   "bomb"       "and"        "here"       "comes"     
[306] "a"          "guided"     "missile"    "here"       "comes"     
[311] "a"          "hydrogen"   "bomb"       "i"          "can"       
[316] "almost"     "hear"       "its"        "whistle"    "i"         
[321] "can"        "almost"     "hear"       "its"        "whistle"   
[326] "share"      "lyrics"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterates over each token</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>it <span class="ot">&lt;-</span> <span class="fu">itoken</span>(tokens2, <span class="at">ids =</span> cleaned_data<span class="sc">$</span>artist[<span class="dv">1</span><span class="sc">:</span><span class="dv">350</span>], <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints iterator</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>it</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;itoken&gt;
  Inherits from: &lt;CallbackIterator&gt;
  Public:
    callback: function (x) 
    clone: function (deep = FALSE) 
    initialize: function (x, callback = identity) 
    is_complete: active binding
    length: active binding
    move_cursor: function () 
    nextElem: function () 
    x: GenericIterator, iterator, R6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Built the vocabulary</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">create_vocabulary</span>(it)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print vocabulary</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of docs: 156 
0 stopwords:  ... 
ngram_min = 1; ngram_max = 1 
Vocabulary: 
        term term_count doc_count
      &lt;char&gt;      &lt;int&gt;     &lt;int&gt;
   1:    000          1         1
   2:     10          1         1
   3:     15          1         1
   4:     17          1         1
   5:   1910          1         1
  ---                            
3202:    and        697       134
3203:     to        716       134
3204:      i        953       131
3205:    you       1090       129
3206:    the       1140       145</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">prune_vocabulary</span>(v, <span class="at">term_count_min =</span> <span class="dv">10</span>, <span class="at">doc_proportion_max =</span> <span class="fl">0.2</span>)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 369   3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="ot">&lt;-</span> <span class="fu">vocab_vectorizer</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">create_dtm</span>(it, vectorizer, <span class="at">type =</span> <span class="st">"dgTMatrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>lda_model <span class="ot">&lt;-</span> LDA<span class="sc">$</span><span class="fu">new</span>(<span class="at">n_topics =</span> <span class="dv">10</span>, <span class="at">doc_topic_prior =</span> <span class="fl">0.1</span>, <span class="at">topic_word_prior =</span> <span class="fl">0.01</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Print other methods for LDA</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>lda_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;WarpLDA&gt;
  Inherits from: &lt;LDA&gt;
  Public:
    clone: function (deep = FALSE) 
    components: active binding
    fit_transform: function (x, n_iter = 1000, convergence_tol = 0.001, n_check_convergence = 10, 
    get_top_words: function (n = 10, topic_number = 1L:private$n_topics, lambda = 1) 
    initialize: function (n_topics = 10L, doc_topic_prior = 50/n_topics, topic_word_prior = 1/n_topics, 
    plot: function (lambda.step = 0.1, reorder.topics = FALSE, doc_len = private$doc_len, 
    topic_word_distribution: active binding
    transform: function (x, n_iter = 1000, convergence_tol = 0.001, n_check_convergence = 10, 
  Private:
    calc_pseudo_loglikelihood: function (ptr = private$ptr) 
    check_convert_input: function (x) 
    components_: NULL
    doc_len: NULL
    doc_topic_distribution: function () 
    doc_topic_distribution_with_prior: function () 
    doc_topic_matrix: NULL
    doc_topic_prior: 0.1
    fit_transform_internal: function (model_ptr, n_iter, convergence_tol, n_check_convergence, 
    get_c_all: function () 
    get_c_all_local: function () 
    get_doc_topic_matrix: function (prt, nr) 
    get_topic_word_count: function () 
    init_model_dtm: function (x, ptr = private$ptr) 
    internal_matrix_formats: list
    is_initialized: FALSE
    n_iter_inference: 10
    n_topics: 10
    ptr: NULL
    reset_c_local: function () 
    run_iter_doc: function (update_topics = TRUE, ptr = private$ptr) 
    run_iter_word: function (update_topics = TRUE, ptr = private$ptr) 
    seeds: 1696537157.41998 246000720.770894
    set_c_all: function (x) 
    set_internal_matrix_formats: function (sparse = NULL, dense = NULL) 
    topic_word_distribution_with_prior: function () 
    topic_word_prior: 0.01
    transform_internal: function (x, n_iter = 1000, convergence_tol = 0.001, n_check_convergence = 10, 
    vocabulary: NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fitting model</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>doc_topic_distr <span class="ot">&lt;-</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  lda_model<span class="sc">$</span><span class="fu">fit_transform</span>(<span class="at">x =</span> dtm, <span class="at">n_iter =</span> <span class="dv">1000</span>,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">convergence_tol =</span> <span class="fl">0.001</span>, <span class="at">n_check_convergence =</span> <span class="dv">25</span>,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>INFO  [18:04:09.257] early stopping at 125 iteration
INFO  [18:04:09.459] early stopping at 125 iteration</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(doc_topic_distr[<span class="dv">1</span>, ], <span class="at">xlab =</span> <span class="st">"topic"</span>,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"proportion"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(doc_topic_distr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>lda_model<span class="sc">$</span><span class="fu">get_top_words</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">topic_number =</span> <span class="fu">c</span>(3L, 5L, 6L), <span class="at">lambda =</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]       [,2]       [,3]     
 [1,] "ever"     "gonna"    "need"   
 [2,] "somebody" "hey"      "heart"  
 [3,] "rollin"   "bah"      "free"   
 [4,] "laka"     "war"      "hard"   
 [5,] "much"     "comes"    "hand"   
 [6,] "than"     "yes"      "am"     
 [7,] "told"     "here"     "without"
 [8,] "best"     "care"     "foxy"   
 [9,] "loving"   "marching" "smile"  
[10,] "tears"    "look"     "how"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/zr/fc7ynkqn1dqf6nfgqfvm72rr0000gn/T//RtmpipHjwB/downloaded_packages</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>stm v1.3.7 successfully loaded. See ?stm for help. 
 Papers, resources, and other materials at structuraltopicmodel.com</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>custom_stopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="st">"baby"</span>, <span class="st">"sha"</span>, <span class="st">"yum"</span>, <span class="st">"yip"</span>, <span class="st">"nana"</span>, <span class="st">"na"</span>, <span class="st">"lyrics"</span>, <span class="st">"oh"</span>, <span class="st">"got"</span>, <span class="st">"x"</span>, <span class="st">"yeah"</span>, <span class="st">"can"</span>, <span class="st">"go"</span>, <span class="st">"like"</span>, <span class="st">"now"</span>, <span class="st">"chorus"</span>, <span class="st">"get"</span>, <span class="st">"one"</span>, <span class="st">"x"</span>, <span class="st">"hey"</span>,<span class="st">"bah"</span>, <span class="st">"ahh"</span>, <span class="st">"shaka-laka-laka"</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>all_stopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>), custom_stopwords)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenize</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>lyric_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(sentiment_df<span class="sc">$</span>Text,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_numbers =</span> T,</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_punct =</span>  T,</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_symbols =</span> T)</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="co"># trim stop words</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>lyric_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(lyric_tokens,</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  all_stopwords)</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a><span class="co"># create dfm</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>myDfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(lyric_tokens,</span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">tolower=</span>T)</span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(myDfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  156 3027</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>cor_topic_model <span class="ot">&lt;-</span> <span class="fu">stm</span>(myDfm, <span class="at">K =</span> <span class="dv">5</span>,</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(cor_topic_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Topic 1 Top Words:
     Highest Prob: time, long, love, fiddle, never, sing, share 
     FREX: fiddle, marching, book, appears, joe, wrote, comes 
     Lift: aaaah, aah, airliner, already, america, angeles, appers 
     Score: fiddle, marching, joe, appears, book, explain, wrote 
Topic 2 Top Words:
     Highest Prob: ya, know, well, love, ever, just, share 
     FREX: mum, ba, sweeter, henry, lo, ya, bone 
     Lift: a-crying, a-half, a-lookin, absurd, adam's, ads, alice's 
     Score: mum, ba, ya, sweeter, henry, jingo, lo 
Topic 3 Top Words:
     Highest Prob: see, home, gonna, time, share, day, take 
     FREX: q, susie, bayou, keeps, overcome, lorraine, letter 
     Lift: 2nd, a-chooglin, accept, actin, afloat, african, alimentari 
     Score: q, susie, overcome, bayou, shall, lorraine, wont 
Topic 4 Top Words:
     Highest Prob: come, love, let, stand, know, make, share 
     FREX: wrong, gypsy, burns, darlin, burning, hurt, hundred 
     Lift: ancient, d'you, folks, gypsy, hit, hurting, nearly 
     Score: stand, rollin, burns, fire, momma, gypsy, ring 
Topic 5 Top Words:
     Highest Prob: g, share, day, happy, d, washed, well 
     FREX: g, d, washed, hop, jesus, foxy, boom 
     Lift: #7, #m7, 1-2-3-4, a-fightin, ablowing, aboard, affect 
     Score: washed, d, jesus, g, hop, boom, c </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findThoughts</span>(cor_topic_model,</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">texts =</span> sentiment_df<span class="sc">$</span>Text,</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Topic 1: 
     Hey, look yonder, tell me what's that you see Marching to the fields of Concord? Looks like Handsome Johnny with a musket in his hand Marching to the Concord war, hey, marching to the Concord war Hey, look yonder, tell me what's that you see Marching to the fields of Gettysburg? Looks like Handsome Johnny with a flintlock in his hand Marching to the Gettysburg war, hey, marching to the Gettysburg war Hey, it's a long hard road, it's a long hard road It's a long hard road, hey, before we'll be free Hey, look yonder, tell me what you see Marching to the fields of Dunkirk? Looks like Handsome Johnny with a carbine in his hand Marching to the Dunkirk war, hey, marching to the Dunkirk war Hey, look yonder, tell me what you see Marching to the fields of Korea? Looks like Handsome Johnny with an M1 in his hand Marching to the Korean war, hey, marching to the Korean war Hey, it's a long hard road, it's a long hard road It's a long hard road, hey, before we'll be free Hey, before we'll be free Hey, look yonder, tell me what you see Marching to the fields of Vietnam? Looks like Handsome Johnny with an M15 Marching to the Vietnam war, hey, marching to the Vietnam war Hey, look yonder, tell me what you see Marching to the fields of Birmingham? Looks like Handsome Johnny with his hand rolled in a fist Marching to the Birmingham war, hey, marching to the Birmingham war Hey, what's the use of singing this song Some of you are not even listening Tell me what it is we've got to do, wait for our fields to start glistening Hey, wait for the bullets to start whistling Hey, here comes a hydrogen bomb and here comes a guided missile Here comes a hydrogen bomb, I can almost hear its whistle I can almost hear its whistle Share lyrics × 
 Topic 2: 
     (UPS) EARTH JULY 1975 Black sails knifing through the pitchblende night Away from the radioactive landmass madness From the silver-suited people searching out Uncontaminated food and shelter on the shores No glowing metal on our ship of wood only Free happy crazy people naked in the universe WE SPEAK EARTH TALK GO RIDE THE MUSIC If you smile at me you know I will understand Cause that is something everybody everywhere does In the same language I can see by your coat my friend that you're from the other side There's just one thing I got to know Can you tell me please who won You must try some of my purple berries I been eating them for six or seven weeks now Haven't got sick once Probably keep us both alive Wooden ships on the water very free and easy Easy you know the way it's supposed to be Silver people on the shoreline leave us be Very free and easy Sail away where the mornin sun goes high Sail away where the wind blows sweet and young birds fly Take a sister by her hand Lead her far from this barren land Horror grips us as we watch you die All we can do is echo your anguished cry and Stare as all you human feelings die We are leaving You don't need us Go and take a sister by her hand Lead her far from this foreign land Somewhere where we might laugh again We are leaving You don't need us Sailing ships on the water very free and easy Easy you know the way it's supposed to be Silver people on the shoreline leave us be Very free And gone NO C'MON GO RIDE THE MUSIC C'MON RIDE IT CHILD Share lyrics × 
 Topic 3: 
     We shall overcome Words and Music by Zilphia Hart., Frank Hamilton, Guy Carawan And Pete Seeger (La melodia sembra sia stata tratta da un canto di pescatori siciliani del 17' Secolo, trasportata in Germania dove è diventata un inno protestante, e da qui Alle congregazioni "bianche" protestanti degli Stati Uniti del sud. E' stata Pubblicata per la prima volta come Inno negro in una versione modificata, nei Primi anni dello scorso secolo. Usata, nella forma attuale, negli anni '40 come Inno "sindacale" dai lavoratori degli Alimentari e del Tabacco del Sud-Carolina, e successivamente dai lavoratori delle scuole popolari del Tennessee. E' usata tradizionalmente per chiudere tutti I congressi Integrazionisti). We shall overcome, We shall overcome, We shall overcome, some day. Oh, deep in my heart, I do believe We shall overcome, some day. We'll walk hand in hand, We'll walk hand in hand, We'll walk hand in hand, some day. Oh, deep in my heart, We shall live in peace, We shall live in peace, We shall live in peace, some day. Oh, deep in my heart, We shall all be free, We shall all be free, We shall all be free, some day. Oh, deep in my heart, We are not afraid, We are not afraid, We are not afraid, today Oh, deep in my heart, We shall overcome, We shall overcome, We shall overcome, some day. Oh, deep in my heart, I do believe We shall overcome, some day. Share lyrics × 
 Topic 4: 
     Cledus T. Judd/Chris Clark, Cledus Crap Anthems (Sesac)/Of Music, Inc. (Sesac) Twas the fight before Christmas When all through the house No furniture left standing, no tv or couch Our aquarium, heck they even knocked over my Chia Pet Memaw was flung 'cross the room by her hair By her sister Ethel who never fought fair Let's get ready to tumble!!!!!!! The children all wrestled and jumped off the beds Dropping elbows and knees on each other's heads And Mamaw wth her frying pan and Pa with his bat Cleared half the room in ten seconds flat The whole brawl began from an innocent matter When Aunt Flo thought Eugene said "She looks a whole lot fatter" She knocked him through the window he fell with a crash Tore down the gutters and busted his leg really bad You ought to have saw it It looked like he'd been in a motorcycle wreck No Kiddin Yeah awful I couldn't turn to look at it You see both sides of our family have never gotten along And every holiday something always go wrong You ain't supposed to fight but spread joy in this season But when they get the nog they just look for a reason In no time at all everybody joined in And right there we squared off with our closest of kin It's a time for givin said Uncle Bill As he gave a black eye to his brother-in-law Phil I heard somebody say "It's the thought that counts And right now I'm thinking about knocking your butt out" Presents and fists flew all over the room And Nana had some fancy moves with the broom She took out three cousins and knocked down the tree And I ducked just in time she swung out at me It's my favorite time of year Dad always has too much beer Gets on the roof and hunts reindeer Merry Christmas from the whole fam damily Tie the antlers on the dog Save some shine for Santa Claus From all the in-laws and outlaws Merry Christmas from the whole fam damily I crawled to the phone Lord it seemed like a mile And called 9-1-1 which we keep on speed dial In a matter of minutes out the window appeared Flashing blue lights and the Sherrif John Deere Just then six men burst through the door Some yelling "HANDS UP" Some "GET ON THE FLOOR" A stray punch from Grandpa found the sherrif's chin And just for good measure he clocked him again It took all 6 cops to get Grandpa in cuffs You know he gets feisty when he runs out of snuff We all stopped our fighting and cheered Grandpa on Heck I thought he could take them I guess I was wrong As they dragged him outside he yelled "I'VE BEEN FRAMED" He was kicking and screaming and calling them names "You (bleep) You (bleep) Let me go you (bleep) You donut eatin stupid (bleep) son of a (bleep)" We stood on the porch as did all our neighbors Who always took interest in our family's behavior "Mind your own business" we heard Grandma shout And "We'll take back the presents and then come bail you out" By now we'd forgotten what we were fighting for We were battered and bruised but united once more Then we all joined hands and sang "Violent Night" Violent Night And we heard Grandpa exclaim as they drove off out of sight: "Merry Christmas to all...MAN that was a good fight!!!!" Deck your neighbor deck the halls Tis the season for a brawl From all of us to all of y'all Merry Christmas from the whole fam damily Merry Christmas from the whole fam damily Merry Christmas from the whole fam damily Share lyrics × 
 Topic 5: 
     Oh, happy day Oh, happy day Oh, happy day When Jesus washed Oh when He washed When Jesus washed He washed our sins away Oh, it's a happy day, oh Oh, happy day (Oh, happy day) Oh, happy day (Oh, happy day) Oh, happy day When Jesus washed (When Jesus washed) Oh when He washed (When Jesus washed) When Jesus washed (When Jesus washed) He washed our sins away Oh, it's a happy day, oh He taught me how to watch Fight and pray, fight and pray He taught me how to wash Our sins, sins away Oh, happy day (Oh, happy day) Oh, happy day (Oh, happy day) Oh, happy day When Jesus washed (When Jesus washed) Oh when He washed (When Jesus washed) When Jesus washed (When Jesus washed) He washed our sins away Oh, it's a happy day, oh He taught me how to watch Fight and pray, fight and pray He taught me how to wash All my sins, sins away Oh, happy day (Oh, happy day) Oh, happy day (Oh, happy day) Oh, happy day When Jesus washed (When Jesus washed) Oh when He washed (When Jesus washed) When Jesus washed (When Jesus washed) He washed our sins away Oh, it's a happy day (Happy day) Oh, Lord (Happy day) Oh, look out (Happy day) Amen Share lyrics ×</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># choose our number of topics</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co"># specify model</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>myModel <span class="ot">&lt;-</span> <span class="fu">stm</span>(myDfm,</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">K =</span> k,</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">prevalence =</span><span class="sc">~</span> positive <span class="sc">*</span> negative,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> sentiment_df,</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">seed =</span> <span class="dv">1234</span>,</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Beginning Spectral Initialization 
     Calculating the gram matrix...
     Finding anchor words...
    .....
     Recovering initialization...
    ..............................
Initialization complete.
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 1 (approx. per word bound = -6.989) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 2 (approx. per word bound = -6.911, relative change = 1.108e-02) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 3 (approx. per word bound = -6.876, relative change = 5.109e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 4 (approx. per word bound = -6.847, relative change = 4.213e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 5 (approx. per word bound = -6.822, relative change = 3.687e-03) 
Topic 1: never, time, let, right, long 
 Topic 2: know, well, ya, said, away 
 Topic 3: day, gonna, home, try, around 
 Topic 4: love, come, make, share, heart 
 Topic 5: just, see, life, share, take 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 6 (approx. per word bound = -6.798, relative change = 3.539e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 7 (approx. per word bound = -6.773, relative change = 3.622e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 8 (approx. per word bound = -6.749, relative change = 3.550e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 9 (approx. per word bound = -6.728, relative change = 3.154e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 10 (approx. per word bound = -6.708, relative change = 2.924e-03) 
Topic 1: never, time, let, long, right 
 Topic 2: know, ya, well, said, away 
 Topic 3: day, gonna, home, around, try 
 Topic 4: love, come, make, heart, stand 
 Topic 5: just, life, share, see, take 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 11 (approx. per word bound = -6.690, relative change = 2.664e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 12 (approx. per word bound = -6.673, relative change = 2.498e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 13 (approx. per word bound = -6.656, relative change = 2.569e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 14 (approx. per word bound = -6.638, relative change = 2.683e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 15 (approx. per word bound = -6.621, relative change = 2.582e-03) 
Topic 1: never, time, long, right, die 
 Topic 2: know, ya, well, said, tell 
 Topic 3: home, see, around, gonna, try 
 Topic 4: love, come, make, let, heart 
 Topic 5: just, life, share, day, g 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 16 (approx. per word bound = -6.607, relative change = 2.191e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 17 (approx. per word bound = -6.594, relative change = 1.964e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 18 (approx. per word bound = -6.582, relative change = 1.841e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 19 (approx. per word bound = -6.570, relative change = 1.742e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 20 (approx. per word bound = -6.559, relative change = 1.688e-03) 
Topic 1: never, time, long, right, fiddle 
 Topic 2: know, ya, said, well, take 
 Topic 3: see, home, gonna, try, sometimes 
 Topic 4: love, come, let, make, heart 
 Topic 5: just, day, share, life, g 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 21 (approx. per word bound = -6.549, relative change = 1.503e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 22 (approx. per word bound = -6.540, relative change = 1.384e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 23 (approx. per word bound = -6.531, relative change = 1.394e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 24 (approx. per word bound = -6.523, relative change = 1.263e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 25 (approx. per word bound = -6.516, relative change = 1.070e-03) 
Topic 1: never, time, long, life, right 
 Topic 2: know, ya, said, well, tell 
 Topic 3: see, home, gonna, try, day 
 Topic 4: love, come, let, make, heart 
 Topic 5: day, share, just, g, keep 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 26 (approx. per word bound = -6.509, relative change = 1.064e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 27 (approx. per word bound = -6.501, relative change = 1.188e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 28 (approx. per word bound = -6.493, relative change = 1.211e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 29 (approx. per word bound = -6.486, relative change = 1.145e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 30 (approx. per word bound = -6.479, relative change = 1.039e-03) 
Topic 1: never, time, long, life, fiddle 
 Topic 2: know, ya, well, said, tell 
 Topic 3: see, home, gonna, time, day 
 Topic 4: love, come, let, make, stand 
 Topic 5: day, share, g, just, happy 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 31 (approx. per word bound = -6.473, relative change = 9.663e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 32 (approx. per word bound = -6.466, relative change = 1.054e-03) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 33 (approx. per word bound = -6.460, relative change = 8.939e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 34 (approx. per word bound = -6.455, relative change = 8.031e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 35 (approx. per word bound = -6.449, relative change = 8.935e-04) 
Topic 1: time, never, long, fiddle, die 
 Topic 2: ya, know, well, ever, tell 
 Topic 3: see, home, gonna, time, day 
 Topic 4: love, come, let, make, stand 
 Topic 5: day, g, share, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 36 (approx. per word bound = -6.445, relative change = 7.209e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 37 (approx. per word bound = -6.441, relative change = 5.233e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 38 (approx. per word bound = -6.439, relative change = 3.752e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 39 (approx. per word bound = -6.437, relative change = 2.544e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 40 (approx. per word bound = -6.435, relative change = 2.759e-04) 
Topic 1: time, long, never, fiddle, die 
 Topic 2: ya, know, well, ever, girl 
 Topic 3: see, home, gonna, time, day 
 Topic 4: love, come, let, make, stand 
 Topic 5: g, day, share, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 41 (approx. per word bound = -6.433, relative change = 3.122e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 42 (approx. per word bound = -6.431, relative change = 3.565e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 43 (approx. per word bound = -6.428, relative change = 4.129e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 44 (approx. per word bound = -6.426, relative change = 3.874e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 45 (approx. per word bound = -6.424, relative change = 3.150e-04) 
Topic 1: time, long, never, fiddle, comes 
 Topic 2: ya, know, well, ever, girl 
 Topic 3: see, home, gonna, day, time 
 Topic 4: love, come, let, stand, make 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 46 (approx. per word bound = -6.422, relative change = 2.843e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 47 (approx. per word bound = -6.421, relative change = 2.521e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 48 (approx. per word bound = -6.419, relative change = 2.696e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 49 (approx. per word bound = -6.417, relative change = 2.395e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 50 (approx. per word bound = -6.416, relative change = 2.408e-04) 
Topic 1: time, long, never, fiddle, comes 
 Topic 2: ya, know, well, ever, just 
 Topic 3: see, home, gonna, day, share 
 Topic 4: love, come, let, stand, make 
 Topic 5: g, day, share, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 51 (approx. per word bound = -6.414, relative change = 2.976e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 52 (approx. per word bound = -6.412, relative change = 3.033e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 53 (approx. per word bound = -6.410, relative change = 2.596e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 54 (approx. per word bound = -6.409, relative change = 2.461e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 55 (approx. per word bound = -6.407, relative change = 2.203e-04) 
Topic 1: time, long, never, fiddle, comes 
 Topic 2: ya, know, well, ever, love 
 Topic 3: see, home, gonna, share, time 
 Topic 4: love, come, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 56 (approx. per word bound = -6.406, relative change = 1.775e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 57 (approx. per word bound = -6.405, relative change = 1.532e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 58 (approx. per word bound = -6.404, relative change = 1.533e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 59 (approx. per word bound = -6.403, relative change = 1.573e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 60 (approx. per word bound = -6.402, relative change = 1.511e-04) 
Topic 1: time, long, fiddle, never, sing 
 Topic 2: ya, know, well, ever, love 
 Topic 3: see, home, gonna, share, take 
 Topic 4: love, come, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 61 (approx. per word bound = -6.401, relative change = 1.591e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 62 (approx. per word bound = -6.400, relative change = 1.311e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 63 (approx. per word bound = -6.399, relative change = 1.465e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 64 (approx. per word bound = -6.399, relative change = 1.044e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 65 (approx. per word bound = -6.398, relative change = 9.174e-05) 
Topic 1: time, long, fiddle, never, sing 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: love, come, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 66 (approx. per word bound = -6.397, relative change = 1.169e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 67 (approx. per word bound = -6.397, relative change = 1.263e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 68 (approx. per word bound = -6.396, relative change = 7.757e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 69 (approx. per word bound = -6.396, relative change = 6.353e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 70 (approx. per word bound = -6.395, relative change = 8.811e-05) 
Topic 1: time, long, fiddle, never, sing 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: love, come, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 71 (approx. per word bound = -6.394, relative change = 1.406e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 72 (approx. per word bound = -6.393, relative change = 2.146e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 73 (approx. per word bound = -6.392, relative change = 2.006e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 74 (approx. per word bound = -6.391, relative change = 1.195e-04) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 75 (approx. per word bound = -6.390, relative change = 8.878e-05) 
Topic 1: time, long, fiddle, never, sing 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 76 (approx. per word bound = -6.390, relative change = 8.726e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 77 (approx. per word bound = -6.389, relative change = 9.459e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 78 (approx. per word bound = -6.389, relative change = 7.455e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 79 (approx. per word bound = -6.388, relative change = 6.282e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 80 (approx. per word bound = -6.388, relative change = 6.925e-05) 
Topic 1: time, long, fiddle, never, love 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 81 (approx. per word bound = -6.387, relative change = 7.345e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 82 (approx. per word bound = -6.387, relative change = 6.835e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 83 (approx. per word bound = -6.386, relative change = 4.953e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 84 (approx. per word bound = -6.386, relative change = 2.792e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 85 (approx. per word bound = -6.386, relative change = 2.313e-05) 
Topic 1: time, long, fiddle, love, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 86 (approx. per word bound = -6.386, relative change = 3.641e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 87 (approx. per word bound = -6.386, relative change = 5.875e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 88 (approx. per word bound = -6.385, relative change = 3.954e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 89 (approx. per word bound = -6.385, relative change = 2.385e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 90 (approx. per word bound = -6.385, relative change = 2.005e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 91 (approx. per word bound = -6.385, relative change = 2.153e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 92 (approx. per word bound = -6.385, relative change = 2.500e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 93 (approx. per word bound = -6.385, relative change = 2.887e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 94 (approx. per word bound = -6.384, relative change = 4.035e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 95 (approx. per word bound = -6.384, relative change = 4.628e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 96 (approx. per word bound = -6.384, relative change = 4.651e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 97 (approx. per word bound = -6.383, relative change = 6.634e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 98 (approx. per word bound = -6.383, relative change = 7.153e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 99 (approx. per word bound = -6.382, relative change = 7.025e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 100 (approx. per word bound = -6.382, relative change = 9.008e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 101 (approx. per word bound = -6.381, relative change = 7.467e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 102 (approx. per word bound = -6.381, relative change = 6.202e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 103 (approx. per word bound = -6.381, relative change = 5.450e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 104 (approx. per word bound = -6.380, relative change = 4.898e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 105 (approx. per word bound = -6.380, relative change = 4.221e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 106 (approx. per word bound = -6.380, relative change = 4.514e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 107 (approx. per word bound = -6.379, relative change = 3.723e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 108 (approx. per word bound = -6.379, relative change = 3.849e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 109 (approx. per word bound = -6.379, relative change = 2.892e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 110 (approx. per word bound = -6.379, relative change = 2.860e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 111 (approx. per word bound = -6.379, relative change = 2.691e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 112 (approx. per word bound = -6.378, relative change = 4.368e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 113 (approx. per word bound = -6.378, relative change = 5.683e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 114 (approx. per word bound = -6.378, relative change = 1.852e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 115 (approx. per word bound = -6.378, relative change = 1.723e-05) 
Topic 1: time, long, love, fiddle, never 
 Topic 2: ya, know, well, love, ever 
 Topic 3: see, home, gonna, share, take 
 Topic 4: come, love, let, stand, know 
 Topic 5: g, share, day, happy, d 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 116 (approx. per word bound = -6.378, relative change = 1.797e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Completing Iteration 117 (approx. per word bound = -6.378, relative change = 1.119e-05) 
............................................................................................................................................................
Completed E-Step (0 seconds). 
Completed M-Step. 
Model Converged </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(myModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Topic 1 Top Words:
     Highest Prob: time, long, love, fiddle, never, know, sing 
     FREX: fiddle, marching, book, appears, joe, comes, long 
     Lift: bird, birmingham, bomb, book, button, buttons, concord 
     Score: fiddle, marching, joe, appears, book, handsome, explain 
Topic 2 Top Words:
     Highest Prob: ya, know, well, love, ever, share, just 
     FREX: mum, ba, sweeter, henry, lo, ya, bone 
     Lift: worth, a-bornin, a-crying, a-half, a-lookin, a-plenty, absurd 
     Score: mum, sweeter, ba, ya, henry, lo, jingo 
Topic 3 Top Words:
     Highest Prob: see, home, gonna, share, take, time, day 
     FREX: q, susie, bayou, keeps, overcome, lorraine, home 
     Lift: add, airliner, aloneand, anni, approaches, avenue, backwood 
     Score: q, susie, overcome, bayou, shall, wont, lorraine 
Topic 4 Top Words:
     Highest Prob: come, love, let, stand, know, make, share 
     FREX: wrong, burns, gypsy, darlin, burning, hurt, hundred 
     Lift: 9-1-1, achin, acting, action, affection, aid, aint 
     Score: stand, burns, rollin, fire, christmas, gypsy, merry 
Topic 5 Top Words:
     Highest Prob: g, share, day, happy, d, washed, well 
     FREX: g, d, washed, hop, jesus, foxy, boom 
     Lift: amazed, bm, board, desert, doctor, flashin, fortune 
     Score: washed, d, jesus, g, hop, boom, sins </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(myModel, <span class="at">type =</span> <span class="st">"summary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the words</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>myTopicNames <span class="ot">&lt;-</span> <span class="fu">labelTopics</span>(myModel, <span class="at">n=</span><span class="dv">4</span>)<span class="sc">$</span>frex</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set up an empty vector</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>myTopicLabels <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, k)</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co"># set up a loop to go through the topics and collapse the words to a single name</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k){</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    myTopicLabels[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(myTopicNames[i,], <span class="at">collapse =</span> <span class="st">"_"</span>)</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="co"># print the names</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>myTopicLabels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "fiddle_marching_book_appears" "mum_ba_sweeter_henry"        
[3] "q_susie_bayou_keeps"          "wrong_burns_gypsy_darlin"    
[5] "g_d_washed_hop"              </code></pre>
</div>
</div>
<p>There seems to be prevalence with themes like “love”, “share”, “home”, “time”. I’ve found that I need to continually tweak my code to account for words in songs that aren’t really words, and this has made it more difficult to uncover overall themes that are often represented in abstract ways. Because of this, it’s helpful to incorporate analysis on historical newspapers from the time of the counterculture movement to see how mainstream media is looking at topics such as the Vietnam war.</p>
</section>
</section>
<section id="media-analysis" class="level3">
<h3 class="anchored" data-anchor-id="media-analysis">Media Analysis</h3>
<p>I’m looking at historical newspapers from before 1975 pertaining to topics such as “war”, “protest”, “anti-war”, “Vietnam”. ProQuest provided me with hundreds of documents, some of which I’ve entered into R and performed OCR to create a preliminary corpus. I had to add some custom stopwords here as well, because OCR can’t always pick up on all of the words in blurry, older documents.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"tesseract"</span>, <span class="st">"pdftools"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
The downloaded binary packages are in
    /var/folders/zr/fc7ynkqn1dqf6nfgqfvm72rr0000gn/T//RtmpipHjwB/downloaded_packages</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using poppler version 23.04.0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>pdf_file <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"/Users/sophieryan/Documents/Github/Blogs/Extremist_Activities_Are_Threa.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/Nixon_Says_It's_Time_to_Draw_L.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/Most_of_U.S._is_behind_anti-wa.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/Bravery_medals_discarded_in_an.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/War_Protesters_Mass_For_Washin-2.pdf"</span>,</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="st">"/Users/sophieryan/Documents/Github/Blogs/250,000_WAR_PROTESTERS_STAGE_P.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/WAR_RALLY_TODAY_EXPECTS_NEW_AI.pdf"</span>,<span class="st">"/Users/sophieryan/Documents/Github/Blogs/Agnew_Scores_War_Foes;_Rally_t.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/EXECUTIVE_URGES_UNITY_WITH_YOU.pdf"</span>, <span class="st">"/Users/sophieryan/Documents/Github/Blogs/Watching_the_Returns_Some_Rac.pdf"</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Checking that the pdfs work in my environment</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">file.exists</span>(pdf_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">ocr</span>(pdf_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Converting page 1 to Extremist_Activities_Are_Threa_1.png... done!
Converting page 1 to Nixon_Says_It's_Time_to_Draw_L_1.png... done!
Converting page 2 to Nixon_Says_It's_Time_to_Draw_L_2.png... done!
Converting page 1 to Most_of_U.S._is_behind_anti-wa_1.png... done!
Converting page 1 to Bravery_medals_discarded_in_an_1.png... done!
Converting page 1 to War_Protesters_Mass_For_Washin-2_1.png... done!
Converting page 2 to War_Protesters_Mass_For_Washin-2_2.png... done!
Converting page 1 to 250,000_WAR_PROTESTERS_STAGE_P_1.png... done!
Converting page 2 to 250,000_WAR_PROTESTERS_STAGE_P_2.png... done!
Converting page 1 to WAR_RALLY_TODAY_EXPECTS_NEW_AI_1.png... done!
Converting page 1 to Agnew_Scores_War_Foes;_Rally_t_1.png... done!
Converting page 2 to Agnew_Scores_War_Foes;_Rally_t_2.png... done!
Converting page 1 to EXECUTIVE_URGES_UNITY_WITH_YOU_1.png... done!
Converting page 1 to Watching_the_Returns_Some_Rac_1.png... done!</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(text, <span class="st">"ocr_output.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>newspaper_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(newspaper_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 14 documents, showing 14 documents:

   Text Types Tokens Sentences
  text1   513    871        16
  text2   253    472        12
  text3   461    875        29
  text4   250    440        14
  text5   224    412        19
  text6   641   1279        41
  text7   392    707        20
  text8   321    589        19
  text9  1477   3998        87
 text10   280    469        12
 text11   162    285        13
 text12   468   1024        33
 text13   384    747        25
 text14   605   1233        47</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ndoc</span>(newspaper_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(newspaper_corpus))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13401</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>news_tokens_clean <span class="ot">&lt;-</span> <span class="fu">tokens</span>(newspaper_corpus, </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">what =</span> <span class="st">"word"</span>, </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>,</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">tokens_tolower</span>()</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>news_custom_stopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="st">"ee"</span>, <span class="st">"ae"</span>, <span class="st">"said"</span>, <span class="st">"se"</span>, <span class="st">"re"</span>, <span class="st">"oe"</span>, <span class="st">"eee"</span>, <span class="st">"e"</span>, <span class="st">"es"</span>, <span class="st">"I"</span>)</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>news_tokens_clean <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(news_tokens_clean,</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>                              <span class="at">pattern =</span> news_custom_stopwords,</span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">selection =</span> <span class="st">"remove"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>news_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(news_tokens_clean)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(news_dfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         |        new        war washington  president       york permission 
       187         43         36         31         29         29         26 
     times      rally        see 
        25         24         22 </code></pre>
</div>
</div>
<p>This wordcloud helps visualize the dfm overall.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co"># draw the wordcloud</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(news_dfm, <span class="at">min_count =</span> <span class="dv">10</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>sentiment_scores_news <span class="ot">&lt;-</span> <span class="fu">dfm_lookup</span>(news_dfm, <span class="at">dictionary =</span> data_dictionary_LSD2015)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to df</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>sentiment_df_news <span class="ot">&lt;-</span> <span class="fu">convert</span>(sentiment_scores_news, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>sentiment_df_news<span class="sc">$</span>Text <span class="ot">&lt;-</span> <span class="fu">as.character</span>(newspaper_corpus)</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentiment_df_news)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id negative positive neg_positive neg_negative
1  text1       41       11            0            0
2  text2       13       12            0            0
3  text3       18       12            0            0
4  text4       18       14            0            0
5  text5       13       10            0            0
6  text6       25       19            0            0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Extremist Activities Are Threatening National Security, Hoover Asserts: Around the Nation\nFrom staff reports and dispatch\nThe Washington Post, Times Herald (1959-1973); Oct 31, 1970:\nProQuest Historical Newspapers: The Washington Post\npg. Al0\nAround the Nation\nKE ist Activities Are Th\n2\nxtremist Activities Are reatening\nNational Security, H A\national Security, roover Asserts\nA dramatic increase in ac- crease over the previous of others narrowly escaped\ntivities of so-called New Left - year. rene aeons when they\nextremist groups has posed ans ed a statied Fenn Centra\na distinet threat to the secu: Tate Figure Insane commuter train and found\nrity of the United States, _,HOS.ANGELES — Charles  Mremsetves in the path of an\nPBL Di Rd &gt; (Tex) Watson, slated to stand o pcth ne in n.\nrector J. Edgar Hoo- trial alone in the murder of 0 njured passengers\nver said yestérday. ; actress Sharon Tate and six “Ve " struck by the train, but\nHoover singled out the others, was committed to a who y 100 other commuters\n‘litant h fac. mental institution after a W40 were crossing the tracks\nmilitant Weatherman fac . managed to scramble to s\ntion of the Students for a Psychiatrist described him as +4 is before the\n. a ‘an insane “vegetable” who ‘ety moments before the\nDemocratic Society as the may be in danger of dying. New York-bound train pas-\nkey group responsible for A judge ordered him com- en ee senvers had gott\nmuch of the recent violence, mitted as a “life-saving mea- off anothe Me hatte oe nd\nfovernment institutions, -D¢_ tried unless he regains aoe ee eee nin\ngovernment institu on ; sanity, meted OMe te ter e ran\n_His remarks on radical ac- Watson, 24, has been de- diesel ' ue to a ah th Its\ntivities Seoea Sor the finan scribed at the trial of Charles “#€sel locomotive cab Hox.\nn ort top ine inan- — Manson and three women\na year which ended June — nembers of Manson’s hippie- Addenda :\n: style clan as the leader of e The first person con- |\nHoover also accused the — killer parties that killed Miss _ P ;\nBlack Panther Party of Tate and the six ethers. vieted under the 1968 fed- |\nwidening its assault against eral riot act, Howard Me-\npolice and promoting racial 3 Bombs in N.Y. chanic, was sentenced to |\nWn Toover reported a decline NEW YORK—A synchro. five years In prison. He par-\nin the membership of the nized series of homemade ticipated in violence at |\nwhite extremist Ku Klux  29mb blasts damaged two Washington University, St. |\nKlan from 6,800 to about olive station wn the and ® Louis, May 5 when the\nCama , pa tn There were no injuries, ROTC pula was burned. |\non university campuses Police said tiey nad no ‘A 08 ners Superior\nHe charged that the Stu- clues (0 who placed the Chae aval t foun talice\ndent Mobilization Commit. P!Pebombs, containing pro- C)arees agains! tour pollce-\ntee to End the War in Viet. Pane gas and timers, or any men who fatally shot two |\nnam, which ordanived a i@dication that they were unarmed Mexican nationals.\nmassive antiwar demonstra. linked = to revolutionary she i ners hay reached\ntion in Washington last No- BrOUDS. nud never have reached |\nvember. was firmly _ der The first bomb exploded him, Since a lower court\nTrot i ‘st conl aL y uncer at 3:12 a.m. EST, the second found no negligence was\nTh y et she ed that 2¢,3:15 a.m. and a third at involved.\nthere. weke a cord o7gg 3:22, am. Police said the °* A $2 million wrongful\nbank robberic ntl “Ug bombs, described as “sophis- death suit against the state\nan ob reries in hae “: — ticated”, all had been placed of Ohio by the father of a\ninvolving the interst ate ship. in windowsills, Tene ats University att.\nStale STI P- ent killed in the Ma\nment of stolen vehicles were "Train H its Two confrontation was dismissed f\nalso up sharply. During the : ; on the basis of sovereign im- |\nyear, the FBI located 30,318 NEW YORK—Two passen- munity. !\nfugitives, an 18 per centin- vers were injured and scores — prom stat{ reporls and news dispatches |\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Nixon Says It's Time to Draw Line: It's Time to Draw the Line,’ Nixon Says\nBy Carroll Kilpatrick; Washington Post Staff Writer\nThe Washington Post, Times Herald (1959-1973); Oct 20, 1970;\nProQuest Historical Newspapers: The Washington Post\npg. Al\nBlocked due to copyright.\nSee full page image or\nmicrofilm.\n' i ' ‘ ‘ '\n1\nA coed clings to President Nixon's hand as be stands on his car to greet Ohio State University studer\nIt’s Time to\nD Line —\nBy Carroll Kilpatrick\nWashington Post Staff Writer\nKANSAS CITY, Mo., Oct. 19\n—President Nixon brought his\ncampaign for a Republican\nCongress to Middle America\ntoday with a declaration that\n“it is time to draw the line”\nagainst “a rising tide” of ter-\nrorism, crime and campus vio-\nlence.\nSpeaking to sizable crowds,\nMr. Nixon drew his biggest ap-\nplause when he said, ‘We are\nnot going to stand for’ vio-\nence and lawlessness and\nthose who “try to shout down\nspeakers with obscene words,”\nDelivering almost the same\nspeech in Columbus, Ohio,\nGrand Forks, N.D., and in Kan-\nsas City, the President cam-\npaigned zealously as of old,\nurging “the great silent ma-\njority in America to stand up\nand be counted.”\nHe called for the election of\n“men in the House and in the\nSenate who will vote for strong\nlaws to deai with law and or-\n‘der rather than against them.”\nBearing down heavily on the\nissue of lawlessness, Mr. Nixon\ntold his audiences that yes-\nterday he telephoned Cana-,\ndian Prime Minister Pierre\nElliott Trudeau to express\n“sympathy for what had hap-|\npened” in Quebec.\nWhile he said it would not\nbe appropriate for him to com-\nment on what happened in\nCanada, he nevertheless called\nthe killing of the Quebec labor\nminister “a terrible tragedy.”\nMet at almost every stop\nby hecklers, some of whom\nshouted obscenities or other-\nwise tried to shout him down,\nthe President told North\nDakota voters to remember\nthat “the four-letter word that\nis most powerful of all" is vote.\nMr. Nixon spoke first on\nthe Capitol steps in Columbus\nin behalf of GOP Senate can-\ndidate Robert A. Taft Jr., and\nGOP gubernatorial candidate\nRoger Cloud. —\nSee PRESIDENT, A4, Col. 3\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Blocked due to copyright.\nSee full page image or\nmicrofilm.\n! |\nPresifent Nixon shakes hands with wellmisher at Columbus, Ohio At ight is senatorial hopetul Robert Taft J\n\nHe then flew to Grand| ‘¢ War.” the self-styled hibpymduct of the digtuptets, launch a whirlwind fam-\nForks to campaign for Rep. vere i pushed £ those who close down cqpeign that will keep hin on\nQuentin N. Burdick. — The crowd pushed fo fies, those who engage/tire road until election day,\n\nTonight the President spoke and a security man thrus Vislence, those who shout follev. 3.\n| roment the fr  §P elbow in front of the t\nhere to boost Missouri Attor-/©'00W 1 170 youliietter obscenities or any othedust why the President is\nney General John C. Dan-| “I dont need your elbowing of obscienties and thad¥aking his prestige on an elec.\nforth, who is challenging Vet-/ the youth shouted. “Is this) the t t hout dotian that many observers\neran Sen. Stuart Symington.|way washington isrunningthe., “, : Bete §\n\nThe President said that “on| 1 ate tiie doubt will be decisive is not\nvirtually every major issue” AS ‘he President chatted ©oune America wants aotirely clear. In Columbus,\nSymington and Sen. Thomas | . ” the President said, “putwever, the President gave\nF, Eagleton vote against the/with others, a young man ’ , hi his sir h\nPresident. Since many issueS} asked the President to ib iso wants to listen sso ae int of ISS ategy when\nare decided by one, tWo OT], +. Grart card and the hinnne that they don’t accept the said he had never seen “so\nthree votes, the election of . R ‘ gS, many of the thi Any close elections” and\nDanforth could make a sig-|Re 4 little closer, yellAd. ’.-. going on, that is g\nratcant difference: the Pred. “you can take my draft ca Ue need change and That the outcome might be de-|\ndent said. | | hin aston te arat et need young people consta fiymined ‘to dat new ed\n\nMr. Nixon combined attacks). 4’ coca. «wo! stioning everything we y ys unde\non campus violence with praise nn sald ar We'r a Aa in ng, but it should be peaeaects: —\nfor the majority of students, troops home. You witth change in our society! The momentum is impart-\nwho, he said, oppose violence] |. boy. Two million Aner#M route here, it was aR he sa to Tat and,\nnow more than a year ago. can boys have served in Viegunced that the Presid Whil some Re, ti |\n|. After speaking in Columbus,| oo Te oad of them aMauld speak Saturday in Dug Tle, some Republicans:\nthe President drove to Ohio ona . woud of you.” dalk, Md. in support of flier in the year predicted:\nSlate University campus for Whe a half dozen 0 tate’s Re ublican candida publicans would capture\n‘an unscheduled visit. — led b " irl chante q anti ar P e Senate this year, Mr.\n- When he arrived at the mid- s] ogans o veral students xon has made no such pre-\ndle of the large campus, only) 3) ad. “chat up, shut up.” diction, |\na few students were in evi-\\" a, president received a | |\ndence, but soon several hun- loud cheer as he headed for\ndred surrounded him. The his car to go to the airport.\noverwhelming majority Werelmiore he told newsmen that\nfriendly, but there was much ni, visit to the campus had\npushing and shoving as stu- “renewed my faith in young\ndents tried to get close to him. Americans.”\n\n“Mr. President, will you) Declaring that he was “im.\nshake hands with a hipple?"'| pressed by the dedication” of\none young man in a sweat! those he talked with, the Presi:\nshirt shouted. The Presidentident said, “I think they are\neither did not hear him or turned off this year, as they\nchose to ignore him, but the! weren't turned off Jast year\nyouth kept trying. Ibefore the violence began to\n\n“We don’t want to talk about: get to them. But they are\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Most of U.S. is behind anti-war protests\nPrentice, Michael\nThe Jerusalem Post (1950-2008); Apr 26, 1971; ProQuest Historical Newspapers: The Jerusalem Post\npg. 5\n\nt of —\nbehind\nbe a .\nanti-war\nprotests\nBy MICHAEL PRENTICE\nWASHINGTON (Reuter). —\nAMERICA'S anti-war movement\nearned new respect with Satur-\nday's peaceful protest by 200,000\nopponents of the Vietnam conflict,\nand its aims now apparently have\nthe support of a majority of Amer-\nicans.\n\nOrganisers rated the-massive pro- |\ntest as probably the most effective\never staged here against the war.\nIt was almost certainly the most\norderly and peaceful of the big\nanti-war demonstrations that are\nnow an annual event in Washing-\nton.\n\nPolicemen lining the parade route\nhad almost nothing to do except\njoke and talk with the casually-\ndressed crowd, Police Chief Jerry\n‘Wilson described the protesters as\n“a overy peaceful crowd.”\n\nAlthough most of the demonstra-\ntors were young, public opinion\npolis now show most Americans\nare wary of the war and favour\nsetting a date for total withdrawal\nof U.S. forces.\n\nPresident Nixon did not see or\nhear the protesters as he was out\nof the city for the week-end. But\nhe has said he will not tip his\nhand to the enemy by fixing a date\nfor an end to U.S. involvement.\n\nSeveral members of Congress took\npart in the demonstration, includ-\ning Indiana Democratic Senator\nVance Hartke, who has a measure\nbefore the Senate calling for an\nimmediate withdrawal from Viet-\nnam. The protest marked the peak\nof this year’s anti-war demonstra-\ntions here — although others are\nstill to come, More radical groups\nwill seek to bring life in the city\nto a halt in the first week of May\nby civil disobedience.\n\nSaturday’s demonstration, in size\nalone, was impressive, with crowds\npacking the public grounds in\nfront of the houses of Congress and\n@ sea of people stretching away a\nmile along Pennsylvania Avenue\nand the Mall.\n\nBy police estimates the turnout\nof 200,000 was the second largest\never staged against the Vietnam\nWar.\n\nThe latest protest was dismissed\nas ‘a parade of hippies” by right-\nwing broadcaster Carl McIntyre, who\nheads a movement demanding no-\nthing less than a U.S. military vic-\ntory in Vietnam.\n\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Bravery medals discarded in anti-war stir\nM V KAMATH The Times of India News Service\nThe Times of India (1861-); Apr 26, 1971; ProQuest Historical Newspapers: The Times of India\npg. 10\nBravery medals:\n\n- discarded”\n\ne e - _4,@\n\nin anti-war stir\n\n- ~By M..V. KAMATH.. .. .\n“The Times of India” News Service\n_WASHINGTON,. April 25: In mas-\nsive but non-violent anti-war demon-\nstrations yesterday in San Francisco\nand Washington. American citizens\ntold the Administration that they want\n“peace now.” .\n-Some 250,000 people, including\nGI's in service trade unionists carry-\ning placards, construction workers. in\ntheir hard hats, well-dressed business”\nmen and. parents pushing baby carri-\nages, marched 20 abreast to the U.S..\nCapitol to listen to speaker after\nspeaker call for the immediate end\nof war. | a, |\n\nThe demonstrations “topped those\nstaged on Friday hy returned Amer-\nican war veterans who, in an impres-\nsive show. of their feelings, threw\naway their hard-won war medals be-\ncause they had become to them\n“symbols of shame,  dishonour and\ninhumanity.” .\n\nAbout 700 medals for bravery were\nthus ‘publicly discarded by the war\nveterans on the steps of the U.S. |\nCapitol in an act that has profoundly\nshaken the nation. Several hundred\nveterans, . many of. whom were on |\ncrutches or had lost their limbs, parti- |\ncipated in the week-long anti-war’\nralHes. CT\n\nAt the prestigious National Health\nInstitute, over 2,000 scientists, admi-\nnistrators and staff members gave their\nsupport to the anti-war efforts. !\n\nWhether all this tremendous show\nof national sentiment—this time not.\nfrom students and hippies. alone but.\nfrom a wide cross-section of the.\nAmerican public—will have any effect |\non the Administration policy remains |\nto be seen. President Nixon was holi- |\ndaying at Camp David. The Senate.\nForeign Relations Committee is con-)\nsidering six proposals to. curtail or |\nend the war. _ |\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n
6 War Protesters Mass For Washington Rally\nThe Hartford Courant (1923-); Apr 24, 1971; ProQuest Historical Newspapers: Hartford Courant\npg. |\n/ .\n. 2@ : . : : :\nfoots ane ot\n. : % syke Meg + - * a , ae &gt;. ue\n' : vy } ‘ P4 . a Pee i\n; : .. . tor fa ,\n. 4 4 “ . vt Z “\nee os . * a\n* an aN . - 7 ; e +\n- . .# . ° .\n: ’ - - .\nsha 3: . 4 : a ;\n) it RY ee, Se Se oe Oe Co , .\nPS a sf! Sa ine dey\npa Feeormmnerend |\ni 0 of S “* 4 ‘ " ews on : ’\nee wpe Y ty\nee on ¥ Se te,\neo . , . a i . 4 a a . . Pry ‘\ng re\n‘ * aes - Sg + +\noF ” Sal —. } R\nON re ee | gftette SS ay a\ni C0 55th von 0? URS at en . a A ¥\nROT tet alll Pah ot ; ae. hee ow . eemmang\n. we oy ore OEP rs . . Res wo Pn " . ies 6 ; . “¥\n. je uM y Rl ok Rt a Re : ¥ S : *. ; ‘i a‘ ,\nMh. . Sg ian SS EE: EEN ~~\nma 4 ,~ &gt; ee PRES *: is iy\nKy a 7 - . - pet . ESSE Ronee a &gt; em me . nel\nUA Sc: PO A eS RN. eae\nRy b} eg Peps ge 7NS co nh eee / “ - ee om is\nCo f a. &gt; SRS pr" ORM Ne en me Stier, ES\nRe: a: GS aw. ence” a Bah\n3 ~ dN, gS ES: CESS ie\n, or AS &gt; hr ne age SR ‘ 1a\nte: of So ERE Ee ee\nph OG ee Py b|\n- pa ae . RBS seis ee oe Roce\nAwd | oe 5 &lt;e ees aaa shat . at - ‘ 2) sealers « Sy) at . oe. mite’ 3 .\nSMI ars See ae eat Sc Pg TE . ~~\n“SS "SRR SS ERR: ES Race EES oer a\n! “ae By ’ + eestias jhe a fies es oh, ee el 7 mae . . - satg eastaiy,\nSiw ERT AN rant S30 canals - apne iemea tee :\n“6 ie Sg oS ele ~ aanenate Pe\nER Sere) se? 8 | ee\nBRieo a OR a\n1 INS SS CAC &amp;\n. 4° CRS Der 3k Shame - gen.\nC8 AEN Bm Gwe Se es?\nEye YT FS ¥ See oe 2929 are Rens he &amp;\nMaking His Point\nAn antiwar protester heaves his medals ing up a week of demonstrations against\nover a fence in front of the Capitol Friday the fighting in Indochina by discarding their\nas part of the Vietnam Veterans Against the combat medals on the steps of the Capitol\nWar demonstration. The veterans are wind- (UPI).\nF Washingt R lly\n2g t\nWASHINGTON (AP) — Over day they want total and im- tre on busy downtown streets\n700 Vietnam veterans who mediate U.S. military with- and staged a sil-in on the steps\nl . . .\n‘turned in their combat medals drawal from Vietnam. of the Supreme Court Thursday\nPri il joi f . _. when 108 of them were arrested.\nFriday will join tens of thou- Beginning about noon from a py; °\n| ‘ ; B Friday, they were all acquitted\nsands of other protestors to ; he Whit .\n‘day and march through the Staging area near the White of disorderly conduct charges.\nI streets of Washington in opposi- House which President Nixon They brought their separate\npe S. policy in Indochina, has vacated for the weekend, anti-war activities to a close\nition to U.S. policy in Indochina. , .\n| The sponsoring _—National the protestors will parade 16 Friday when they tossed away\nliti he blocks up Pennsylvania Avenue thelr ribbons and medals earned\nPeace Action Coalition says the F : aaaren . “\nmere ill b to the U.S. Capitol for a rally in-Vietnam, calling them ‘‘sym-\nactivities ‘wi e peaceful. So ane Mt\n| oti Columbi ‘an that will include addresses by bols of shame,” in a demonstra-\ndoes District of Columbia Police d é the Capitol st\nChief Jerry V. Wilson. But Atty. members of Congress and peace ton on e api o hese th\nGen. John N. Mitchell said Fri- 4ctivists oday {hey h Join the\nday “a substantial possibility A rock concert that will follow thousands of others who began\nexists” that violence will break- the rally on. the Washington pedal nd monstreti Priday\nout during the weekend and monument grounds is expected Com ared to Revival lon.\nthroughout the next week. to run well into the night. P ;\n' And the Pentagon announced The massive rally, one of doz- ina emir. one observer lik:\nfederal troops have been alerted ens of varying sizes in this town sae, . o doz as of the nt iva\nfor possible duty here at the over the past four years, signals food on the C tol ste eran\nJustice Department’s request. the end of a week of antiwar ac- 5° vd t ahout 3 00 c nv oid\nAides to Mitchell said the at- tivities here by the over-1,000 how th nh d once b and to |\ntorney general later told them veterans who camped out on the to ey thei dale et\nhe did not include today’s Capital Mall. And it kicks off a °° eto hanee thei ae ‘i\nrally among events at which he two-week spring “peace offen- bout A cnange fica tion in\nexpected violent confrontations. sive’? by a more radical group th ul American participation in\n“The attorney general said he of anti-war dissidents who claim “Strip ned of the ho\nexpects today to be peaceful’ they are also lobbying for var- pped of me hopes we\nSaid the aide. ious social domestic causes. See Protesters, Page 12, Col. 5\nThe veterans, who have been That group, the People’s Coa-\nconducting nonviolent demon- lition for Peace and Justice,\nstrations here all week, and the says it will take nonviolent steps\nother contingents of peace to shut down the government in\ngroups, housewives, hippies, order to make its points.\n‘women’s liberationists and oth- The veterans lobbied con-\n[ers will again make it clear to- gressmen, staged guerrilla thea-\nReproduced with permission of the copyright owner. Further reproduction prohibited without permission.\n</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>sentiment_df_news<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (sentiment_df_news<span class="sc">$</span>positive <span class="sc">-</span> sentiment_df_news<span class="sc">$</span>negative)<span class="sc">/</span>(sentiment_df_news<span class="sc">$</span>positive <span class="sc">+</span> sentiment_df_news<span class="sc">$</span>negative)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sentiment_df_news) <span class="sc">+</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(polarity)) <span class="sc">+</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The sentiments in the newspaper corpus are much more negative, and are not as evenly spread as the song lyric corpus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>news_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(news_dfm)</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(news_dfm, <span class="dv">30</span>))</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>smaller_fcm_news <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(news_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(smaller_fcm_news))</span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(smaller_fcm_news, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I looked at the keyword “peace”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>kwic_news_peace <span class="ot">&lt;-</span> <span class="fu">kwic</span>(news_tokens_clean,</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"peace"</span>))</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_news_peace)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.                                                                  
  [text5, 53] american citizens told administration want | peace |
 [text6, 364]         avenue thelr ribbons medals earned | peace |
 [text6, 406]             v wilson atty members congress | peace |
 [text6, 537]         rally among events two-week spring | peace |
 [text6, 586]     coa conducting nonviolent demon lition | peace |
 [text6, 595]     says take nonviolent steps contingents | peace |
                                          
 now people including gi's service        
 action coalition says f aaaren           
 ton api o hese th                        
 offen bout cnange fica tion              
 justice strations week says take         
 shut government groups housewives hippies</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now look at a broader window of terms </span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>kwic_news_peace <span class="ot">&lt;-</span> <span class="fu">kwic</span>(news_tokens_clean,</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"peace"</span>),</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">window =</span> <span class="dv">10</span>)</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at the first few uses</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_news_peace)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Keyword-in-context with 6 matches.             
  [text5, 53]
 [text6, 364]
 [text6, 406]
 [text6, 537]
 [text6, 586]
 [text6, 595]
                                                                                        
 strations yesterday san francisco washington american citizens told administration want
                 tossed away liti blocks pennsylvania avenue thelr ribbons medals earned
                                 é capitol st chief jerry v wilson atty members congress
                                   ° ° eto hanee thei rally among events two-week spring
                 page col veterans group people’s coa conducting nonviolent demon lition
              lition peace justice strations week says take nonviolent steps contingents
          
 | peace |
 | peace |
 | peace |
 | peace |
 | peace |
 | peace |
                                                                                   
 now people including gi's service trade unionists carry ing placards              
 action coalition says f aaaren mere ill b u.s capitol                             
 ton api o hese th gen john n mitchell fri                                         
 offen bout cnange fica tion expected violent confrontations sive radical          
 justice strations week says take nonviolent steps contingents peace shut          
 shut government groups housewives hippies order make points women’s liberationists</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>news_peace_corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(kwic_news_peace)</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>news_peace_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(news_peace_corp)</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>news_peace_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(news_peace_tokens)</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(news_peace_dfm, <span class="at">min_count =</span> <span class="dv">3</span>, <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Blogs3_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I’m starting to look at key words in context here as well. As I move forward, I want to directly compare themes in each corpus as they relate to particular words. I think seeing differences in sentiments in this way will provide more insight as to how the themes compared. It is clear that a lot of the tokens related to “students”, “peace” and “protesters”. I’m excited to see what further analysis may reveal about these two corpora.</p>
</section>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection">Reflection</h2>
<p>Overall, this exploration of my data has provided me with a much better understanding of how I should proceed with this interesting but complex set of corpora. For my lyric corpus, I may need to find a way to add more data, and work on removing more random stop words. I think the topic modeling was helpful, but it did make me realize that song lyrics need to be treated much differently than other more traditional documents. This being said, incorporating the media data may help in making sense of the song themes. I think it will be important moving forward to focus on common key words in both datasets and use that as my way of comparison. I need to continue developing my media corpus by adding more documents. I will also do topic modeling on that corpus. In my final product, I’d like to include word clouds and/or text plot networks that represent both corpora in one single visualization. I think this will provide a much more well rounded understanding of how they relate. This project has been very enjoyable for me so far. I think investigations like this are important. In order to fully understand the attitudes, beliefs, and behaviors of a time period, we can’t just look at official documents and mainstream published media. We need to understand how everybody was feeling, and music is often a voice to those who don’t have the power and connections to make themselves heard. Particularly in the counterculture movement, art could be just as political as newspapers. I look forward to working more with this data to provide a well rounded, different perspective of the time period.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>